(this["webpackJsonp@tableplus/diagram"]=this["webpackJsonp@tableplus/diagram"]||[]).push([[0],{115:function(e,t,n){e.exports={container:"marker_container__3lfDf"}},118:function(e,t,n){e.exports={container:"footer_container__24p6U",help:"footer_help__3IgD0"}},119:function(e,t,n){e.exports={container:"form_container__36Xg9",row:"form_row__3j5qh",backdrop:"form_backdrop__32TBM"}},121:function(e,t,n){e.exports={container:"progress_container__2Ol0Z",body:"progress_body__1k_9V"}},122:function(e,t,n){e.exports={container:"close_container__i-HDF",buttonSize:"close_buttonSize__3lDgz"}},123:function(e,t,n){e.exports={container:"library_container__9TFwt",header:"library_header__dnnFR"}},13:function(e,t,n){e.exports={row:"header_row__2Poz-",more:"header_more__1Xq6f",search:"header_search__4a7UQ",box:"header_box__LNvh4",main:"header_main__2NAhQ",boxView:"header_boxView__2r0UA",boxEdit:"header_boxEdit__1WWMe"}},185:function(e,t,n){e.exports={container:"canvas_container__2sQuY"}},187:function(e,t,n){e.exports={container:"wrapper_container__2iYqI"}},189:function(e,t,n){e.exports={container:"add_container__3bLsS","slide-in":"add_slide-in__3cPv2"}},190:function(e,t,n){e.exports={container:"header_container__2XTjX"}},191:function(e,t,n){e.exports={container:"edge_container__3FzBN","slide-in":"edge_slide-in__3E8_i",dragging:"edge_dragging__1rV5O"}},192:function(e,t,n){e.exports={container:"boolean_container__u3DPK"}},193:function(e,t,n){e.exports={container:"remove_container__3tkkH","slide-in":"remove_slide-in__2Ku37"}},194:function(e,t,n){e.exports={container:"canvas_container__ovJF7"}},195:function(e,t,n){e.exports={container:"menu_container__3j-cr",menu:"menu_menu__2sOYh"}},198:function(e){e.exports=JSON.parse('{"columns":[{"id":"0","name":"name","type":"string"},{"id":"1","name":"type","type":"string"},{"id":"2","name":"nullable","type":"boolean"}],"items":[{"id":"table","name":"Bookings","schema":"new","rows":[{"id":"column","name":"book_ref","type":"char(6)"},{"id":"column_2","name":"book_date","type":"timestamptz"},{"id":"column_3","name":"total_amount","type":"numeric(10,2)"}]},{"id":"table_2","name":"Tickets","schema":"new","rows":[{"id":"column","name":"ticket_no","type":"char(13)"},{"id":"column_2","name":"book_ref","type":"char(6)"},{"id":"column_3","name":"passenger_id","type":"varchar(20)"},{"id":"column_4","name":"passenger_name","type":"text"},{"id":"column_5","name":"contact_data","type":"jsonb"}]},{"id":"table_3","name":"Ticket_flights","schema":"new","rows":[{"id":"column","name":"ticket_no","type":"char(13)"},{"id":"column_2","name":"flight_id","type":"integer"},{"id":"column_3","name":"fare_conditions","type":"varchar(10)"},{"id":"column_4","name":"amount","type":"numeric(10,2)"}]},{"id":"table_4","name":"Boarding_passes","schema":"new","rows":[{"id":"column","name":"ticket_no","type":"char(13)"},{"id":"column_2","name":"flight_id","type":"integer"},{"id":"column_3","name":"boarding_no","type":"integer"},{"id":"column_4","name":"seat_no","type":"varchar(4)"}]},{"id":"table_5","name":"Flights","schema":"new","rows":[{"id":"column","name":"flight_id","type":"serial"},{"id":"column_2","name":"flight_no","type":"char(6)"},{"id":"column_3","name":"scheduled_departure","type":"timestamptz"},{"id":"column_4","name":"scheduled_arrival","type":"timestamptz"},{"id":"column_5","name":"departure_airport","type":"char(3)"},{"id":"column_6","name":"arrival_airport","type":"char(3)"},{"id":"column_7","name":"status","type":"varchar(20)"},{"id":"column_8","name":"aircraft_code","type":"char(3)"},{"id":"column_9","name":"actual_departure","type":"timestamptz"},{"id":"column_10","name":"actual_arrival","type":"timestamptz"}]},{"id":"table_6","name":"Airports","schema":"new","rows":[{"id":"column","name":"airport_code","type":"char(3)"},{"id":"column_2","name":"airport_name","type":"text"},{"id":"column_3","name":"city","type":"text"},{"id":"column_4","name":"coordinates","type":"point"},{"id":"column_5","name":"timezone","type":"text"}]},{"id":"table_7","name":"Aircrafts","schema":"new","rows":[{"id":"column","name":"aircraft_code","type":"char(3)"},{"id":"column_2","name":"model","type":"text"},{"id":"column_3","name":"range","type":"integer"}]},{"id":"table_8","name":"Seats","schema":"new","rows":[{"id":"column","name":"aircraft_code","type":"char(3)"},{"id":"column_2","name":"seat_no","type":"varchar(4)"},{"id":"column_3","name":"fare_conditions","type":"varchar(10)"}]}],"refs":[{"from":{"name":"Tickets","schema":"new","rows":["column_2"]},"to":{"name":"Bookings","schema":"new","rows":["column"]}},{"from":{"name":"Ticket_flights","schema":"new","rows":["column"]},"to":{"name":"Tickets","schema":"new","rows":["column"]}},{"from":{"name":"Boarding_passes","schema":"new","rows":["column","column_2"]},"to":{"name":"Ticket_flights","schema":"new","rows":["column","column_2"]}},{"from":{"name":"Ticket_flights","schema":"new","rows":["column_2"]},"to":{"name":"Flights","schema":"new","rows":["column"]}},{"from":{"name":"Flights","schema":"new","rows":["column_5"]},"to":{"name":"Airports","schema":"new","rows":["column"]}},{"from":{"name":"Flights","schema":"new","rows":["column_8"]},"to":{"name":"Aircrafts","schema":"new","rows":["column"]}},{"from":{"name":"Seats","schema":"new","rows":["column"]},"to":{"name":"Aircrafts","schema":"new","rows":["column"]}},{"from":{"name":"Flights","schema":"new","rows":["column_6"]},"to":{"name":"Airports","schema":"new","rows":["column"]}}],"schema":"main"}')},199:function(e){e.exports=JSON.parse('{"columns":[{"id":"0","name":"name","type":"string"},{"id":"1","name":"type","type":"string"},{"id":"2","name":"nullable","type":"boolean"}],"items":[{"id":"table","name":"dept_emp","schema":"new","rows":[{"id":"column","name":"emp_no","type":"int(11)"},{"id":"column_2","name":"dept_no","type":"char(4)"},{"id":"column_3","name":"from_date","type":"date"},{"id":"column_4","name":"to_date","type":"date"}]},{"id":"table_2","name":"departments","schema":"new","rows":[{"id":"column","name":"dept_no","type":"char(4)"},{"id":"column_2","name":"dept_name","type":"varchar(40)"}]},{"id":"table_3","name":"dept_manager","schema":"new","rows":[{"id":"column","name":"dept_no","type":"char(4)"},{"id":"column_2","name":"emp_no","type":"int(11)"},{"id":"column_3","name":"from_date","type":"date"},{"id":"column_4","name":"to_date","type":"date"}]},{"id":"table_4","name":"employees","schema":"new","rows":[{"id":"column","name":"emp_no","type":"int(11)"},{"id":"column_2","name":"birth_date","type":"date"},{"id":"column_3","name":"first_name","type":"varchar(14)"},{"id":"column_4","name":"last_name","type":"varchar(16)"},{"id":"column_5","name":"gender","type":"enum(\'M\', \'F\')"},{"id":"column_6","name":"hire_date","type":"date"}]},{"id":"table_5","name":"titles","schema":"new","rows":[{"id":"column","name":"emp_no","type":"int(11)"},{"id":"column_2","name":"title","type":"varchar(50)"},{"id":"column_3","name":"from_date","type":"date"},{"id":"column_4","name":"to_date","type":"date"}]},{"id":"table_6","name":"salaries","schema":"new","rows":[{"id":"column","name":"emp_no","type":"int(11)"},{"id":"column_2","name":"salary","type":"int(11)"},{"id":"column_3","name":"from_date","type":"date"},{"id":"column_4","name":"to_date","type":"date"}]}],"refs":[{"from":{"name":"dept_manager","schema":"new","rows":["column"]},"to":{"name":"departments","schema":"new","rows":["column"]}},{"from":{"name":"dept_manager","schema":"new","rows":["column_2"]},"to":{"name":"employees","schema":"new","rows":["column"]}},{"from":{"name":"dept_emp","schema":"new","rows":["column"]},"to":{"name":"employees","schema":"new","rows":["column"]}},{"from":{"name":"titles","schema":"new","rows":["column"]},"to":{"name":"employees","schema":"new","rows":["column"]}},{"from":{"name":"salaries","schema":"new","rows":["column"]},"to":{"name":"employees","schema":"new","rows":["column"]}},{"from":{"name":"dept_emp","schema":"new","rows":["column_2"]},"to":{"name":"departments","schema":"new","rows":["column"]}}],"schema":"main"}')},20:function(e,t,n){e.exports={container:"active_container__miKQ8",background:"active_background__1jpGj",grid:"active_grid__34IBn"}},200:function(e){e.exports=JSON.parse('{"columns":[{"id":"0","name":"name","type":"string"},{"id":"1","name":"type","type":"string"},{"id":"2","name":"nullable","type":"boolean"}],"items":[{"id":"table","name":"title.basics","schema":"new","rows":[{"id":"column","name":"titleId","type":"tconst"},{"id":"column_2","name":"titleType","type":"string"},{"id":"column_3","name":"primaryTitle","type":"string"},{"id":"column_4","name":"originalTitle","type":"string"},{"id":"column_5","name":"isAdult","type":"boolean"},{"id":"column_6","name":"startYear","type":"number"},{"id":"column_7","name":"endYear","type":"number"},{"id":"column_8","name":"runtimeMinutes","type":"number"},{"id":"column_9","name":"genres","type":"string[]"}]},{"id":"table_2","name":"title.crew","schema":"new","rows":[{"id":"column","name":"titleId","type":"tconst"},{"id":"column_2","name":"directors","type":"nconst[]"},{"id":"column_3","name":"writers","type":"nconst[]"}]},{"id":"table_3","name":"name.basics","schema":"new","rows":[{"id":"column","name":"nameId","type":"nconst"},{"id":"column_2","name":"primaryName","type":"string"},{"id":"column_3","name":"birthYear","type":"integer"},{"id":"column_4","name":"deathYear","type":"integer"},{"id":"column_5","name":"primaryProfession","type":"string[]"},{"id":"column_6","name":"knownForTitles","type":"tconst[]"}]},{"id":"table_5","name":"title.principals","schema":"new","rows":[{"id":"column","name":"titleId","type":"tconst"},{"id":"column_2","name":"ordering","type":"integer"},{"id":"column_3","name":"nameId","type":"nconst"},{"id":"column_4","name":"category","type":"string"},{"id":"column_5","name":"job","type":"string"},{"id":"column_6","name":"characters","type":"string"}]},{"id":"table_4","name":"title.episode","schema":"new","rows":[{"id":"column","name":"episodeId","type":"tconst"},{"id":"column_2","name":"parentTitleId","type":"tconst"},{"id":"column_3","name":"seasonNumber","type":"integer"},{"id":"column_4","name":"episodeNumber","type":"integer"}]},{"id":"table_6","name":"title.ratings","schema":"new","rows":[{"id":"column","name":"titleId","type":"tconst"},{"id":"column_2","name":"averageRating","type":"integer"},{"id":"column_3","name":"numVotes","type":"integer"}]}],"refs":[{"from":{"name":"title.crew","schema":"new","rows":["column"]},"to":{"name":"title.basics","schema":"new","rows":["column"]}},{"from":{"name":"title.crew","schema":"new","rows":["column_2"]},"to":{"name":"name.basics","schema":"new","rows":["column"]}},{"from":{"name":"title.crew","schema":"new","rows":["column_3"]},"to":{"name":"name.basics","schema":"new","rows":["column"]}},{"from":{"name":"name.basics","schema":"new","rows":["column_6"]},"to":{"name":"title.basics","schema":"new","rows":["column"]}},{"from":{"name":"title.episode","schema":"new","rows":["column_2"]},"to":{"name":"title.basics","schema":"new","rows":["column"]}},{"from":{"name":"title.principals","schema":"new","rows":["column"]},"to":{"name":"title.basics","schema":"new","rows":["column"]}},{"from":{"name":"title.principals","schema":"new","rows":["column_3"]},"to":{"name":"name.basics","schema":"new","rows":["column"]}},{"from":{"name":"title.ratings","schema":"new","rows":["column"]},"to":{"name":"title.basics","schema":"new","rows":["column"]}}],"schema":"main"}')},201:function(e,t,n){e.exports={stripe:"background_stripe__1z4cm"}},202:function(e,t,n){e.exports={container:"empty_container__1cbmI"}},203:function(e,t,n){e.exports={container:"copyright_container__2WUGZ"}},204:function(e,t){e.exports="data:image/png;base64,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"},205:function(e,t,n){e.exports={container:"links_container__10bTk"}},206:function(e,t,n){e.exports={container:"privacy_container__1yxF5"}},207:function(e,t,n){e.exports={container:"resizer_container__3N5RH"}},210:function(e,t,n){e.exports=n(401)},25:function(e,t,n){e.exports={path:"edge_path__-22co",to:"edge_to__1fydf",from:"edge_from__YD0uI",selected:"edge_selected__3-BcE",dot:"edge_dot__2ro9c",hitarea:"edge_hitarea__MGk1K"}},26:function(e,t,n){e.exports={container:"active_container__1ov3u",over:"active_over__39uJM",field:"active_field__2ao_c",field1st:"active_field1st__2B7m7",field2nd:"active_field2nd__1zJP_",fields:"active_fields__3j9sf"}},32:function(e,t,n){e.exports={container:"app_container__2sVhN",header:"app_header__3clac",footer:"app_footer__2SmgZ",body:"app_body__2iQ4V",canvas:"app_canvas__2u_WY",library:"app_library__39C_Q"}},33:function(e,t,n){e.exports={container:"resizer_container__hTMOz",line:"resizer_line__21MwA",noDrag:"resizer_noDrag__2jYi_",drag:"resizer_drag__qL2a9",disable:"resizer_disable__sBo4V"}},399:function(e,t,n){},40:function(e,t,n){e.exports={container:"visible_container__2npX8","react-draggable-dragging":"visible_react-draggable-dragging__JK5nW",selected:"visible_selected__3Rr10",expanded:"visible_expanded__2HCk7",body:"visible_body__1iC4k",columns:"visible_columns__IumO9"}},400:function(e,t,n){},401:function(e,t,n){"use strict";n.r(t),n.d(t,"VERSION",(function(){return fc}));n(211);var a=n(182),r=n(183),i=n(209),o=n(208),c=n(1),l=function(){if(["localhost","diagramplus.com","beta.diagramplus.com","diagram-plus.vercel.app"].includes(window.location.hostname))return"web";var e=navigator.platform.toLowerCase();return e.includes("mac")?"mac":e.includes("win")?"win":"web"}(),u="mac"===l||"win"===l,s=n(0),m=n.n(s),d=n(3),f=n(4),p=n.n(f),v=n(7),b={};window.Diagram=b;var h=[["Initialized",{}]],g=function(e,t){b[e]=t},w=function(e){var t=[];return b[e]=function(){for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];h.push(["Pending ".concat(e),a]),t.push(a)},function(n){for(;t.length>0;){var a=t.shift();h.push(["Execute pending ".concat(e),a]),n(a)}b[e]=n}},E={get:function(){var e=Object(v.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.localStorage.getItem("dg/current"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),set:function(){var e=Object(v.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===t?window.localStorage.removeItem("dg/current"):window.localStorage.setItem("dg/current",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},y=new TextEncoder,_=function(e){var t=y.encode(e),n=new Array(t.length);return t.forEach((function(e){n.push(String.fromCharCode(e))})),btoa(n.join(""))},x=new TextDecoder,j=function(e){return e.charCodeAt(0)},O=n(2),k=function(e){if("version"in e===!1)return t=e,Object(O.a)(Object(O.a)({},t),{},{type:"base",version:2});var t;if(function(e){return"version"in e&&2===e.version}(e))return e;throw Error("Unknown base diagram version")},D=function(e){return Object(O.a)(Object(O.a)({},e),{},{version:3,tables:e.tables.map((function(e){return Object(O.a)(Object(O.a)({},e),{},{rowsExpanded:e.isRowsExpand,selected:!1})})),refs:e.refs.map((function(e){return Object(O.a)(Object(O.a)({},e),{},{selected:!1})}))})},A=function(e){if(function(e){return"version"in e===!1}(e)){var t=(n=e,Object(O.a)(Object(O.a)({},n),{},{type:"edit",version:2}));return D(t)}var n;if(function(e){return"version"in e&&2===e.version}(e))return D(e);if(function(e){return"version"in e&&3===e.version}(e))return e;throw Error("Unknown edit diagram version")},z=function(e,t,n){var a,r=null!==(a=n.schema)&&void 0!==a?a:e,i=t.get("".concat(r," . ").concat(n.name));if(void 0===i)throw Error('Table Ids "'.concat(n.name,'" not found'));var o=n.rows.map((function(e){var t=i.rows.get(e);if(void 0===t)throw Error('Row id "'.concat(e,'" not found'));return t}));return{table:i.table,rows:o}},I=function(e,t){return{value:{rows:e.rows.map((function(e,t){return{id:t,value:e}})),name:e.name,id:e.id,schema:e.schema},position:{top:-500,left:-500},id:t,rowsExpanded:!1,selected:!1}},C=function(e,t){return{id:t,value:e}},T=function(e){var t=e.schema,n=e.items.map(I);return{type:"edit",version:3,schema:t,tables:n,refs:function(){var a=function(e,t){var n=new Map;return t.forEach((function(t){var a,r=new Map;t.value.rows.forEach((function(e){r.set(e.value.id,e.id)}));var i=null!==(a=t.value.schema)&&void 0!==a?a:e,o="".concat(i," . ").concat(t.value.name);n.set(o,{table:t.id,rows:r})})),n}(t,n);return e.refs.map(function(e,t){return function(n,a){return{id:a,from:z(e,t,n.from),to:z(e,t,n.to),selected:!1}}}(t,a))}(),columns:e.columns.map(C),size:{width:1e3,height:1e3}}},N=function(e){if(function(e){return"object"===typeof e&&("base"===e.type||void 0!==e.items)}(e)){var t=k(e);return T(t)}if(function(e){return"object"===typeof e&&("edit"===e.type||void 0!==e.tables)}(e))return A(e);throw Error("Diagram is neither Base or Edit type")},S=function(e){var t=JSON.parse(e);return N(t)},M=function(e){var t=function(e){var t=Uint8Array.from(atob(e),j);return x.decode(t)}(e);return S(t)},L=function(e){if("string"===typeof e)return e.startsWith("{")?S(e):M(e);if("object"===typeof e)return N(e);throw Error("Unknown diagram type")},P=function(e){return"".concat("dg/doc/").concat(e)},B=function(){var e=Object(v.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(n=window.localStorage.getItem(P(t)))){e.next=3;break}return e.abrupt("return",n);case 3:throw Error('Document not found: "'.concat(t,'"'));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(v.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.localStorage.setItem(P(t),n);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),H=function(){var e=Object(v.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object.entries(window.localStorage).map((function(e){return{key:e[0],value:e[1]}})).filter((function(e){return e.key.startsWith("dg/doc/")})).map((function(e){return{name:e.key.replace("dg/doc/",""),diagram:L(e.value),saved:!0}})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(v.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.localStorage.removeItem(P(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(v.a)(p.a.mark((function e(t,n){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(t);case 2:return a=e.sent,e.next=5,F(n,a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Q=function(){var e=Object(v.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(t,n);case 2:return e.next=4,R(t);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),X={get:B,set:F,list:H,remove:R,duplicate:V,rename:Q},W=n(50),K=n.n(W),Y=function(e){var t=s.useState(!0),n=Object(d.a)(t,2),a=n[0],r=n[1],i=s.useState(e),o=Object(d.a)(i,2);return{included:a,setIncluded:r,text:o[0],setText:o[1]}},U=function(e){return s.createElement("div",{className:K.a.container},s.createElement("div",{className:K.a.input},s.createElement("div",{className:K.a.included},s.createElement(c.f,{value:e.state.included,setValue:e.state.setIncluded,children:e.label})),s.createElement("div",{className:K.a.text},s.createElement(c.l,{value:e.state.text,setValue:e.state.setText,disabled:!e.state.included,placeholder:e.placeholder}))),e.children&&s.createElement(c.n,null,s.createElement(c.p,null,e.children)))},G=function(){var e=Object(v.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.get();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return","No diagram selected");case 5:return e.next=7,X.get(t);case 7:return n=e.sent,e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(e){return e.included?e.text:void 0},J=function(e){var t="uncaught"===e.type,n=Y((function(){return""})),a=Y((function(){return""})),r=Y((function(){var t;return null!==(t=e.error)&&void 0!==t?t:""})),i=Y((function(){return JSON.stringify(h)})),o=Y((function(){return""})),u=Y((function(){return window.navigator.userAgent})),m=o.setText;s.useEffect((function(){G().then((function(e){m(e)}))}),[m]);var f=s.useState(!1),b=Object(d.a)(f,2),g=b[0],w=b[1],E=function(){var t=Object(v.a)(p.a.mark((function t(s){var m,d;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s.preventDefault(),w(!0),m={type:e.type,host:l,version:fc,error:q(r),message:q(n),contact:q(a),agent:q(u),diagram:q(o),log:q(i)},t.prev=3,t.next=6,window.fetch("https://diagramplus.com/api/report",{method:"POST",body:JSON.stringify(m),headers:{"Content-type":"application/json"}});case 6:return t.next=8,Object(c.B)("The report has been sent successfully");case 8:t.next=14;break;case 10:return t.prev=10,t.t0=t.catch(3),t.next=14,Object(c.B)(["There was an error sending the report","Error detail: ".concat(t.t0.message)]);case 14:return t.prev=14,w(!1),null===(d=e.onDone)||void 0===d||d.call(e),t.finish(14);case 18:case"end":return t.stop()}}),t,null,[[3,10,14,18]])})));return function(e){return t.apply(this,arguments)}}();return s.createElement(c.g,null,s.createElement("form",{onSubmit:function(e){return E(e)}},s.createElement(c.g.Header,null,e.title),s.createElement(c.g.Body,null,s.createElement("div",null,e.description),s.createElement(c.v,{autoFocus:!0,rows:3,value:n.text,setValue:n.setText}),s.createElement(c.j,{size:16}),t&&s.createElement(s.Fragment,null,s.createElement(U,{label:"Include error detail",state:r}),s.createElement(c.j,{size:8})),s.createElement(U,{label:"Include the diagram",state:o}),s.createElement(c.j,{size:8}),s.createElement(U,{label:"Include user agent",state:u}),s.createElement(c.j,{size:8}),s.createElement(U,{label:"Include application log",state:i}),s.createElement(c.j,{size:8}),s.createElement(U,{state:a,label:"Allow us to contact you at:",placeholder:"name@example.com"})),s.createElement(c.g.Footer,null,e.footer,s.createElement(c.j,{size:16}),s.createElement(c.c,{type:"submit",highlight:!0,children:"Send Report",isBusy:g}))))},Z=function(){return s.createElement(s.Fragment,null,s.createElement(c.p,null,"Please tell us about this problem. We will treat your report as confidential and anonymous."),s.createElement(c.j,{size:8}),s.createElement(c.p,null,"To help us diagnose the problem, please describe what you were doing when this error occured:"),s.createElement(c.j,{size:8}))},$=function(){if(u)return null;return s.createElement(c.c,{onClick:function(){return window.location.reload()},children:"Reload"})},ee=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).state={hasError:!1,error:null},r}return Object(r.a)(n,[{key:"render",value:function(){return this.state.hasError?s.createElement(J,{type:"uncaught",title:"There was an unexpected error",description:s.createElement(Z,null),footer:s.createElement($,null),error:this.state.error}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,error:e}}}]),n}(s.Component),te=n(8),ne=["light","dark","auto"],ae=function(e){var t=document.documentElement.classList;if(!t.contains("theme-".concat(e))){var n=ne.map((function(e){return"theme-".concat(e)}));t.remove.apply(t,Object(te.a)(n)),t.add("theme-".concat(e))}},re=function(e){var t=e;if(ne.includes(t))return t;throw Error("Theme is unknown: ".concat(t))},ie=null;g("setTheme",(function(e){var t=re(e);ae(t),ie=t}));var oe=function(e){var t=e.preferences.theme,n=e.setPreferences;m.a.useEffect((function(){ae(t)}),[t]),m.a.useEffect((function(){g("setTheme",(function(e){n(function(e){return function(t){return Object(O.a)(Object(O.a)({},t),{},{theme:re(e)})}}(e))}))}),[n])},ce={theme:"auto",zoom:1,footerVisible:!0,libraryVisible:!0,edgeAnimation:!0,libraryWidth:320},le=function(){var e=Object(O.a)({},ce),t=window.localStorage.getItem("dg/prefs");return null!==t&&Object.assign(e,JSON.parse(t)),null!==ie&&(e.theme=ie),e},ue=s.createContext({preferences:ce,setPreferences:function(){throw Error("Preferences context not found")}}),se=n(11),me=n.n(se),de=Symbol("delete"),fe={newDiagram:function(){return{viewport:null,canvas:null,tables:new Map,edges:new Map}},newRow:function(){return{element:null,fields:new Map}},newTable:function(){return{element:null,rows:new Map}},edgeFieldName:Symbol("edge"),removeFieldName:de,getFieldName:function(e){if("true"===e.dataset.rowRemove)return fe.removeFieldName;if("true"===e.dataset.rowEdge)return fe.edgeFieldName;var t=e.dataset.rowField;if(void 0===t)throw Error("No data-row-field");return t}},pe=n(81),ve=function(e){return Math.round(e/je)*je},be=function(e,t){return{top:e.top-t.top,left:e.left-t.left}},he=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},ge=function(e){return"".concat(e.x," ").concat(e.y)},we=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},Ee=function(e,t){return{x:e.x*t,y:e.y*t}},ye=function(e,t){return e.x*t.y-e.y*t.x},_e=function(e,t){return!(e.left>t.left+t.width)&&(!(t.left>e.left+e.width)&&(!(e.top>t.top+t.height)&&!(t.top>e.top+e.height)))},xe=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},je=16,Oe=16*je,ke=Oe-16,De=4*je,Ae=2*De,ze=Oe+Ae,Ie=n(113),Ce=n.n(Ie),Te=function(e,t){var n=new Ce.a.graphlib.Graph({multigraph:!0});return n.setGraph({rankdir:"LR",nodesep:Ae,ranksep:Ae,marginx:De,marginy:De}),n.setDefaultEdgeLabel((function(){return{}})),t.tables.forEach((function(t){var a,r,i=null!==(a=null===(r=e.tables.get(t.id))||void 0===r?void 0:r.element)&&void 0!==a?a:null;if(null===i)throw Error("Table not found ".concat(t.id));var o=i.clientWidth,c=i.clientHeight;n.setNode(t.id.toString(),{label:"",width:o,height:c})})),t.refs.forEach((function(e){n.setEdge(e.from.table.toString(),e.to.table.toString())})),Ce.a.layout(n),Object(O.a)(Object(O.a)({},t),{},{tables:t.tables.map((function(e){var t=n.node(e.id.toString()),a=function(e){return{top:ve(e.top),left:ve(e.left)}}({top:t.y-t.height/2,left:t.x-t.width/2});return Object(O.a)(Object(O.a)({},e),{},{position:a})})),size:{width:ve(n.graph().width),height:ve(n.graph().height)}})},Ne=function(e){return e.size.height*e.size.width},Se=function(e){var t=e.map((function(e){return{id:e.tables[0].id,size:e.size}})),n=function(e){var t=e.reduce((function(e,t){return e>t.size.width?e:t.size.width}),-1/0),n=e.reduce((function(e,t){return e+Ne(t)}),0),a=2*Math.sqrt(n/2),r=Math.max(a,t);return Math.ceil(r/ze)}(t),a=Array(n).fill(0),r=new Map,i=function(e){return a.map((function(t,n){return{leftIndex:n,top:function(e,t){if(e+t>a.length)return 1/0;for(var n=-1/0,r=0;r<t;r++){var i=a[e+r];n=Math.max(i,n)}return n}(n,e)}})).reduce((function(e,t){return t.top<e.top?t:e}))};return t.sort((function(e,t){return Ne(t)-Ne(e)})).forEach((function(e){for(var t=e.size.width/ze,n=i(t),o=n.top+e.size.height,c=0;c<t;c++)a[n.leftIndex+c]=o;r.set(e.id,{left:n.leftIndex*ze,top:n.top})})),r},Me=function(e){var t=e.diagrams,n=e.masonry,a=0,r=0;return t.forEach((function(e){var t=n.get(e.tables[0].id);if(void 0===t)throw Error("position is undefined");var i=t.left+e.size.width;a=Math.max(a,i);var o=t.top+e.size.height;r=Math.max(r,o)})),a=Math.max(window.screen.availWidth+Ae,a),r=Math.max(window.screen.availHeight+Ae,r),{width:a,height:r}},Le=function(e){var t=[];if(e.diagrams.forEach((function(n){var a=e.masonry.get(n.tables[0].id);if(void 0===a)throw Error("translate is undefined");n.tables.forEach((function(e){var n={top:a.top+e.position.top,left:a.left+e.position.left};t.push(Object(O.a)(Object(O.a)({},e),{},{position:n}))}))})),t.length===e.originalDiagram.tables.length)return t;throw Error("new tables and old tables have different length")},Pe=function(e){var t=[],n=new Map,a=new Map;e.tables.forEach((function(e){a.set(e.id,e)}));var r=new Map;return e.refs.forEach((function(e){var t,n,a=[e.from.table,e.to.table],i=a[0],o=a[1];r.set(i,(null!==(t=r.get(i))&&void 0!==t?t:[]).concat(e)),r.set(o,(null!==(n=r.get(o))&&void 0!==n?n:[]).concat(e))})),e.tables.forEach((function(i){if(!0!==n.get(i.id)){var o=Object(O.a)(Object(O.a)({},e),{},{tables:[],refs:[],size:{width:0,height:0}});!function e(t,n){var a,r,i=t.diagram,o=t.done,c=t.refMap,l=t.tableMap;!0!==o.get(n.id)&&(i.tables.push(n),null===(a=c.get(n.id))||void 0===a||a.forEach((function(e){i.refs.includes(e)||i.refs.push(e)})),o.set(n.id,!0),(null!==(r=c.get(n.id))&&void 0!==r?r:[]).forEach((function(n){var a=l.get(n.from.table),r=l.get(n.to.table);if(void 0===a||void 0===r)throw Error('"fromTable" or "toTable" is undefined');e(t,a),e(t,r)})))}({diagram:o,done:n,tableMap:a,refMap:r},i),t.push(o)}})),t},Be=function(e,t){var n=Pe(t);n=n.map((function(t){return Te(e,t)}));var a,r=Se(n);return{type:"edit",version:(a={originalDiagram:t,masonry:r,diagrams:n}).originalDiagram.version,columns:a.originalDiagram.columns,tables:Le(a),refs:a.originalDiagram.refs,size:Me(a),schema:a.originalDiagram.schema}},Fe=function(e,t){switch(t.type){case"auto-arrange":return function(e,t){return Be(t.elements,e)}(e,t.payload);default:return e}},He=function(e,t){for(var n=e instanceof Set?e:new Set(e),a=1,r=t(a);n.has(r);)r=t(a+=1);return r},Re=function(e,t){return He(e,(function(e){return 1===e?t:"".concat(t,"_").concat(e)}))},Ve=function(e){return He(e,(function(e){return e}))},Qe=function(e,t){switch(t.type){case"replace-as-is":return t.payload.diagram;case"replace":return L(t.payload.diagram);case"append":return function(e,t){if(e.columns.length!==t.columns.length)throw Error("Cannot merge diagrams with different columns");var n=new Set(e.tables.map((function(e){return e.id}))),a=Object(te.a)(e.tables);return t.tables.forEach((function(e){var t=Ve(n);n.add(t);var r=e.position.left+De,i=Object(O.a)(Object(O.a)({},e.position),{},{left:r});a.push(Object(O.a)(Object(O.a)({},e),{},{id:t,position:i}))})),Object(O.a)(Object(O.a)({},e),{},{tables:a})}(e,L(t.payload.diagram));default:return e}},Xe=function(e,t){return function(n){return n.selected===t?n:(e.changed=!0,Object(O.a)(Object(O.a)({},n),{},{selected:t}))}},We=function(e,t){var n={changed:!1},a=Xe(n,t.selected),r=e.tables.map(a),i=e.refs.map(a);return!1===n.changed?e:Object(O.a)(Object(O.a)({},e),{},{tables:r,refs:i})},Ke=function(e,t){switch(t.type){case"add-ref":return function(e,t){var n=e.refs.filter((function(e){return!function(e,t){return e.from.table===t.from.table&&e.from.rows.some((function(e){return t.from.rows.includes(e)}))}(e,t)})),a=e.refs.map((function(e){return e.id})),r=Object(O.a)(Object(O.a)({},t),{},{id:Ve(a),selected:!0});return n.push(r),Object(O.a)(Object(O.a)({},e),{},{refs:n})}(e,t.payload);case"select-ref":return function(e,t){var n=t.append?e:We(e,{selected:!1}),a=n.refs.map((function(e){return e.id!==t.id?e:Object(O.a)(Object(O.a)({},e),{},{selected:!0})}));return Object(O.a)(Object(O.a)({},n),{},{refs:a})}(e,t.payload);case"remove-ref":return function(e,t){var n=e.refs.filter((function(e){return e.id!==t.id}));return Object(O.a)(Object(O.a)({},e),{},{refs:n})}(e,t.payload);default:return e}},Ye=new Map;Ye.set("boolean","FALSE"),Ye.set("string","");var Ue,Ge=function(e,t){var n=Ve(t.map((function(e){return e.id}))),a=t.map((function(e){return e.value.id})),r=Re(a,"column"),i={id:r};return e.forEach((function(e,t){i[e.value.name]=0===t?r:function(e){var t=Ye.get(e.value.type);if(void 0!==t)return t;throw Error('Unknown column type "'.concat(e.value.type,'"'))}(e)})),{id:n,value:i}},qe=function(e,t){var n=function(e,t){return function(n){if(n.id!==e.tableId)return n;var a=Ge(t,n.value.rows),r=n.value.rows.concat(a);return Object(O.a)(Object(O.a)({},n),{},{value:Object(O.a)(Object(O.a)({},n.value),{},{rows:r})})}}(t,e.columns);return Object(O.a)(Object(O.a)({},e),{},{tables:e.tables.map(n)})},Je=function(e,t){return t.table===e.tableId&&t.rows.includes(e.rowId)},Ze=function(e,t){var n=e.tables.map(function(e){return function(t){if(t.id!==e.tableId)return t;var n=t.value.rows.filter((function(t){return t.id!==e.rowId}));return Object(O.a)(Object(O.a)({},t),{},{value:Object(O.a)(Object(O.a)({},t.value),{},{rows:n})})}}(t)),a=e.refs.filter((function(e){return!function(e,t){return Je(e,t.from)||Je(e,t.to)}(t,e)}));return a.length===e.refs.length&&(a=e.refs),Object(O.a)(Object(O.a)({},e),{},{tables:n,refs:a})},$e=function(e){return function(t){if(t.id!==e.tableId)return t;var n=t.value.rows.map(function(e){return function(t){if(t.id!==e.rowId)return t;var n=Object(O.a)({},t.value);return n[e.property]=e.value,Object(O.a)(Object(O.a)({},t),{},{value:n})}}(e));return Object(O.a)(Object(O.a)({},t),{},{value:Object(O.a)(Object(O.a)({},t.value),{},{rows:n})})}},et=function(e,t){if(function(e,t){var n,a=t.tableId,r=t.rowId,i=t.property,o=t.value,c=null===(n=e.tables.find((function(e){return e.id===a})))||void 0===n?void 0:n.value.rows.find((function(e){return e.id===r}));if(!c)throw Error('Row "'.concat(a,".").concat(r,'" not found'));return c.value[i]===o}(e,t))return e;var n=e.tables.map($e(t));return Object(O.a)(Object(O.a)({},e),{},{tables:n})},tt=function(e,t){switch(t.type){case"remove-selected-items":return function(e){var t=e.tables.filter((function(e){return e.selected})).map((function(e){return e.id})),n=new Set(t),a=e.tables.filter((function(e){return!e.selected})),r=e.refs.filter((function(e){var t=[e.from.table,e.to.table],a=t[0],r=t[1];return(!n.has(a)||!n.has(r))&&!e.selected}));return Object(O.a)(Object(O.a)({},e),{},{tables:a,refs:r})}(e);default:return e}},nt=function(e){return{left:e.tables.reduce((function(e,t){return Math.max(e,t.position.left)}),0)+ze,top:De}},at=function(e,t){var n=e.tables.map((function(e){return e.id}));if(null===t.id)return Ve(n);if(n.includes(t.id))throw Error("Table id ".concat(t.id," is used"));return t.id},rt=function(e,t){var n=e.tables.map(function(e){return function(t){return t.id!==e.id?t:Object(O.a)(Object(O.a)({},t),{},{value:Object(O.a)(Object(O.a)({},t.value),{},{name:e.name})})}}(t));return Object(O.a)(Object(O.a)({},e),{},{tables:n})},it=function(e,t){switch(t.type){case"add-table":return function(e,t){var n,a=We(e,{selected:!1}),r=a.tables.map((function(e){return e.value.id})),i=Re(r,"table"),o=Ge(a.columns,[]),c={id:at(a,t),value:{name:i,id:i,schema:"new",rows:[o]},position:null!==(n=t.position)&&void 0!==n?n:nt(a),rowsExpanded:!1,selected:!0},l=Math.max(a.size.width,c.position.left+ze);return Object(O.a)(Object(O.a)({},a),{},{tables:a.tables.concat(c),size:Object(O.a)(Object(O.a)({},a.size),{},{width:l})})}(e,t.payload);case"remove-table":return function(e,t){var n=e.tables.filter((function(e){return e.id!==t.id})),a=e.refs.filter((function(e){return!function(e,t){return t.from.table===e.id||t.to.table===e.id}(t,e)}));return Object(O.a)(Object(O.a)({},e),{},{tables:n,refs:a})}(e,t.payload);case"rename-table":return rt(e,t.payload);case"expand-table-rows":return function(e,t){var n=e.tables.map((function(e){return e.id!==t.id?e:Object(O.a)(Object(O.a)({},e),{},{rowsExpanded:t.expanded})}));return Object(O.a)(Object(O.a)({},e),{},{tables:n})}(e,t.payload);case"expand-all-tables-rows":return function(e,t){var n=e.tables.map((function(e){return Object(O.a)(Object(O.a)({},e),{},{rowsExpanded:t.expanded})}));return Object(O.a)(Object(O.a)({},e),{},{tables:n})}(e,t.payload);case"move-selected-tables":return function(e,t){var n=e.tables.map((function(e){if(!1===e.selected)return e;var n=function(e,t){return{top:e.top+t.top,left:e.left+t.left}}(e.position,t);return Object(O.a)(Object(O.a)({},e),{},{position:n})}));return Object(O.a)(Object(O.a)({},e),{},{tables:n})}(e,t.payload);case"select-some-tables":return function(e,t){var n=t.append?e:We(e,{selected:!1}),a={changed:!1},r=Xe(a,!0),i=n.tables.map((function(e){return t.tableIds.has(e.id)?r(e):e})),o={changed:!1},c=Xe(o,!0),l=n.refs.map((function(e){return t.tableIds.has(e.from.table)||t.tableIds.has(e.to.table)?c(e):e}));return a.changed||o.changed?Object(O.a)(Object(O.a)({},n),{},{tables:a.changed?i:n.tables,refs:o.changed?l:n.refs}):n}(e,t.payload);case"select-all-tables":return We(e,t.payload);case"duplicate-selected-table":return function(e){var t=new Set(e.tables.map((function(e){return e.id}))),n=new Set(e.tables.map((function(e){return e.value.id}))),a=e.tables.filter((function(e){return e.selected})),r=We(e,{selected:!1}),i=r.refs,o=r.tables;return a.forEach((function(e){var a=Object(O.a)(Object(O.a)({},e),{},{id:Ve(t),value:Object(O.a)(Object(O.a)({},e.value),{},{id:Re(n,e.value.id)}),position:Object(O.a)(Object(O.a)({},e.position),{},{left:e.position.left+De}),selected:!0});o.push(a),t.add(a.id),n.add(a.value.id)})),Object(O.a)(Object(O.a)({},e),{},{tables:o,refs:i})}(e);default:return e}},ot=n(114),ct=(Ue=function(e,t){var n=e;return n=function(e,t){switch(t.type){case"add-row":return qe(e,t.payload);case"remove-row":return Ze(e,t.payload);case"update-row":return et(e,t.payload);default:return e}}(n=it(n,t),t),n=Ke(n,t),n=tt(n,t),n=Fe(n,t),n=Qe(n,t)},function(e,t){switch(t.type){case"undo":var n=Object(ot.a)(e.past),a=n[0];return{past:n.slice(1),present:a,future:[e.present].concat(Object(te.a)(e.future))};case"redo":var r=Object(ot.a)(e.future),i=r[0],o=r.slice(1);return{past:[e.present].concat(Object(te.a)(e.past)),present:i,future:o};default:var c=Ue(e.present,t);if(c===e.present)return e;var l=[e.present].concat(Object(te.a)(e.past));return{past:l=l.length<20?l:l.slice(0,20),present:c,future:[]}}}),lt=L(pe),ut=lt,st=s.createContext(lt),mt=function(e){return function(t){return{current:t.current===e?null:t.current,all:t.all.filter((function(t){return t.name!==e}))}}},dt=function(e,t){return function(n){return{current:n.current===e?t:n.current,all:n.all.map((function(n){return n.name!==e?n:Object(O.a)(Object(O.a)({},n),{},{name:t,saved:!0})}))}}},ft=function(e){return function(t){var n=!1,a=t.all.map((function(t){return t.name!==e||!0===t.saved?t:(n=!0,Object(O.a)(Object(O.a)({},t),{},{saved:!0}))}));return!1===n?t:Object(O.a)(Object(O.a)({},t),{},{all:a})}},pt=function(e){return function(t){return{current:e,all:t.all}}},vt=function(){return function(e){var t=e.all.map((function(e){return e.name})),n={name:Re(t,"Untitled"),diagram:lt,saved:!1};return{current:n.name,all:e.all.concat(n)}}},bt=function(e,t){return function(n){var a=n.all.find((function(t){return t.name===e}));if(void 0===a)throw Error("Item is undefined");return{current:t,all:n.all.concat(Object(O.a)(Object(O.a)({},a),{},{name:t}))}}},ht=function(e,t){return function(n){var a=!1,r=n.all.map((function(n){return n.name!==e||n.diagram===t?n:(a=!0,Object(O.a)(Object(O.a)({},n),{},{diagram:t}))}));return!1===a?n:Object(O.a)(Object(O.a)({},n),{},{all:r})}},gt=n(32),wt=n.n(gt),Et=n(25),yt=n.n(Et),_t=function(e){return function(t){var n=t.metaKey||t.ctrlKey||t.shiftKey,a={id:e.edge.id,append:n};e.diagramDispatch({type:"select-ref",payload:a})}},xt=function(e){var t=[e,e.edge],n=t[0].elements,a=t[1].id,r=s.useMemo((function(){return function(e,t){return function(n){null===n?e.edges.delete(t):e.edges.set(t,n)}}(n,a)}),[n,a]),i=function(e){return[yt.a.path,e].join(" ")},o=s.useContext(ue).preferences.edgeAnimation;return s.createElement("g",{ref:r,className:[e.edge.selected?yt.a.selected:""].join(" ")},e.paths.from.map((function(e,t){return s.createElement("path",{key:t,className:i(yt.a.from),d:e})})),e.paths.to.map((function(e,t){return s.createElement("path",{key:t,className:i(yt.a.to),d:e})})),s.createElement("path",{className:i(yt.a.main),d:e.paths.main}),e.edge.selected&&o&&s.createElement("circle",{className:yt.a.dot,r:"4"},s.createElement("animateMotion",{dur:"".concat(Math.max(e.paths.mainLength/100,1),"s"),repeatCount:"indefinite",path:e.paths.main})),s.createElement("path",{className:yt.a.hitarea,d:e.paths.main,onClick:_t(e)}))},jt=function(e,t,n){var a=[e[n],t[n]],r=a[0],i=a[1],o=Math.min(3,Math.abs(r-i)/2);return r===i?r:i+o*(r>i?1:-1)},Ot=function(e,t){return{x:jt(e,t,"x"),y:jt(e,t,"y")}},kt=function(e,t,n){return{X:Ot(e,t),Y:Ot(n,t)}},Dt=je,At=function(){return{countMap:new Map}},zt=function(e,t,n){var a,r,i=null!==(a=null===(r=e.countMap.get(t))||void 0===r?void 0:r.get(n))&&void 0!==a?a:0;return(i%2===0?-1:1)*(Math.ceil(i/2)*Dt)},It=function(e,t,n){var a,r,i=null!==(a=e.countMap.get(t))&&void 0!==a?a:new Map;i.set(n,(null!==(r=i.get(n))&&void 0!==r?r:0)+1),e.countMap.set(t,i)},Ct=function(e,t){var n=e.edge[t],a=e.elements.canvas;if(null===a)throw Error("Canvas is null");var r=a.getBoundingClientRect(),i=e.elements.tables.get(n.table);if(void 0===i)throw Error("Table is undefined");return n.rows.map((function(a){var o,c,l=null!==(o=null===(c=i.rows.get(a))||void 0===c?void 0:c.element)&&void 0!==o?o:void 0;if(void 0===l)throw Error("Row is undefined");var u=l.getBoundingClientRect(),s=u.y+u.height/2-r.y;if("to"===t){var m=e.state.splitY;s+=zt(m,n.table,a)}var d={left:{x:u.left-r.x,y:s},right:{x:u.right-r.x,y:s}};return"to"===t&&It(e.state.splitY,n.table,a),d}))},Tt=5*je,Nt=function(e){var t=e.points,n=e.hand,a={x:0,y:0};return a.x=t[0].x+("right"===n?1:-1)*je,a.y=t.reduce((function(e,t){return e+t.y}),0)/t.length,{paths:t.map((function(e){var t={x:a.x,y:e.y},n=kt(a,t,e),r=n.X,i=n.Y;return"M ".concat(ge(a)," L ").concat(ge(r)," Q ").concat(ge(t)," ").concat(ge(i)," L ").concat(ge(e))})),start:a,hand:n}},St=function(e){var t=function(e,t){var n,a,r=[e[0],t[0]],i=r[0],o=r[1];return i.right.x<=o.left.x-Tt?(n="right",a="left"):i.left.x>=o.right.x+Tt?(n="left",a="right"):(n="right",a="right"),{from:{hand:n,points:e.map((function(e){return e[n]}))},to:{hand:a,points:t.map((function(e){return e[a]}))}}}(Ct(e,"from"),Ct(e,"to")),n=t.from,a=t.to;return{from:Nt(n),to:Nt(a)}},Mt=function(){return{segments:[]}},Lt=function(e,t){var n=[],a=new Set;return e.segments.forEach((function(e){var r=function(e,t){var n=he(e.B,e.A),a=he(t.B,t.A),r=ye(he(t.A,e.A),n),i=ye(n,a);if(0===r&&0===i)return null;if(0===i)return null;var o=r/i,c=ye(he(t.A,e.A),a)/i;if(c<0||c>1||o<0||o>1)return null;var l=Ee(n,c);return we(e.A,l)}(t,e);if(null!==r){var i=function(e,t,n){var a=xe(e,t);if(a<n)return null;var r=he(t,e),i=n;return{X:we(e,Ee(r,1-i/a)),Y:we(e,Ee(r,1+i/a))}}(t.A,r,4);if(null!==i){var o=i.X,c=i.Y,l=xe(r,t.A);a.has(l)||(a.add(l),n.push({distance:l,d:"L ".concat(ge(o)," A ").concat(2," ").concat(2," 0 0 1 ").concat(ge(c))}))}}})),n.sort((function(e,t){return e.distance-t.distance})).map((function(e){return e.d})).join(" ")},Pt=function(e,t){e.segments.push(t)},Bt=je/1,Ft=function(e,t){for(var n=0;n<e.length;n++){var a=e[n],r=t.A.y-a.A.y<0,i=t.A.y-a.B.y<0,o=t.B.y-a.A.y<0,c=t.B.y-a.B.y<0;if(r!==i||i!==o||o!==c)return!1}return!0},Ht=function(){return{segmentsMap:new Map}},Rt=function(e,t){if(t.A.x!==t.B.x)throw Error("Segment is not vertical");for(var n=t.A.x;n>0;){var a,r=null!==(a=e.segmentsMap.get(n))&&void 0!==a?a:[];if(Ft(r,t))return n;n-=Bt}return n},Vt=function(e,t){var n;if(t.A.x!==t.B.x)throw Error("Segment is not vertical");var a=null!==(n=e.segmentsMap.get(t.A.x))&&void 0!==n?n:[];a.push(t),e.segmentsMap.set(t.A.x,a)},Qt=function(e,t){return{x:e.x+("left"===t?-1:1)*je,y:e.y}},Xt=function(e,t){if(t.A.x===t.B.x){var n=Rt(e.splitX,t);t.A.x=n,t.B.x=n,Vt(e.splitX,t)}},Wt=function(e,t,n,a){return 0===n?0:e+xe(a[n-1],t)},Kt=function(e,t,n){if(e.y===t.y&&t.y===n.y)return"L ".concat(ge(t));var a=kt(e,t,n),r=a.X,i=a.Y;return"L ".concat(ge(r)," Q ").concat(ge(t)," ").concat(ge(i))},Yt=function(e){var t=e.edgeEnds,n=e.state,a=t.from,r=t.to,i=[a.start,r.start],o=i[0],c=i[1],l=[Qt(o,a.hand),Qt(c,r.hand)],u=l[0],s=l[1],m=function(e,t){var n={x:Math.max(e.x,t.x),y:0};return n.y=n.x===e.x?t.y:e.y,n}(u,s),d={A:o,B:u},f={A:u,B:m},p={A:m,B:s},v={A:s,B:c};Xt(n,f),Xt(n,p);var b=Lt(n.cross,d),h=Lt(n.cross,v),g=Lt(n.cross,f),w=Lt(n.cross,p);Pt(n.cross,d),Pt(n.cross,f),Pt(n.cross,p),Pt(n.cross,v);var E=Kt(o,u,m),y=Kt(u,m,s),_=Kt(m,s,c);return["M ".concat(ge(o)," ").concat(b," ").concat(E," ").concat(g," ").concat(y," ").concat(w," ").concat(_," ").concat(h," L ").concat(ge(c)),[o,u,m,s,c].reduce(Wt,0)]},Ut=function(e){var t=e.elements,n=e.edges,a={splitY:At(),splitX:Ht(),cross:Mt()},r=new Map;return n.forEach((function(e){var n=St({state:a,elements:t,edge:e}),i=Yt({state:a,edgeEnds:n}),o=Object(d.a)(i,2),c=o[0],l=o[1],u=[n.from.paths,n.to.paths],s=u[0],m=u[1];r.set(e.id,{from:s,main:c,mainLength:l,to:m})})),r},Gt=n(185),qt=n.n(Gt),Jt=n(115),Zt=n.n(Jt),$t=function(){return s.createElement("marker",{id:"edge-from",viewBox:"0 0 10 10",refX:"4",refY:"5",markerWidth:"10",markerHeight:"10",markerUnits:"userSpaceOnUse"},s.createElement("circle",{className:Zt.a.container,cx:"5",cy:"5",r:"4"}))},en=function(){return s.createElement("marker",{id:"edge-to",viewBox:"0 0 10 10",refX:"10",refY:"5",markerWidth:"10",markerHeight:"10",markerUnits:"userSpaceOnUse",orient:"auto-start-reverse"},s.createElement("polygon",{className:Zt.a.container,points:"1,1 9,5 1,9"}))},tn=function(){return s.createElement("defs",null,s.createElement($t,null),s.createElement(en,null))},nn=function(e,t){var n=s.useState(!1),a=Object(d.a)(n,2),r=a[0],i=a[1],o=function(e){var t=s.useRef([]);return s.useMemo((function(){var n,a,r=e.reduce((function(e,t){return e.push(t.from.table,t.to.table),e}),[]);return!1===(n=r,a=t.current,n.every((function(e,t){return e===a[t]})))&&(t.current=r),t.current}),[e])}(e);return s.useEffect((function(){var e=new window.ResizeObserver((function(e){i((function(e){return!e}))}));return o.forEach((function(n){var a,r,i=null!==(a=null===(r=t.tables.get(n))||void 0===r?void 0:r.element)&&void 0!==a?a:null;if(null===i)throw Error("Table is null");e.observe(i)})),function(){return e.disconnect()}}),[o,t]),r},an={from:[],to:[],main:"",mainLength:0},rn=function(e){var t=s.useState(null),n=Object(d.a)(t,2),a=n[0],r=n[1],i=e.diagram,o=e.diagramDispatch,c=e.elements,l=nn(i.refs,c),u=s.useRef(-1);return s.useEffect((function(){return window.clearTimeout(u.current),u.current=window.setTimeout((function(){r(Ut({edges:i.refs,elements:c}))}),0),function(){return window.clearTimeout(u.current)}}),[i,c,l]),null===a?null:s.createElement("svg",{className:qt.a.container,xmlns:"http://www.w3.org/2000/svg",width:i.size.width,height:i.size.height},s.createElement(tn,null),i.refs.map((function(e){var t;return s.createElement(xt,{key:e.id,edge:e,paths:null!==(t=a.get(e.id))&&void 0!==t?t:an,elements:c,diagramDispatch:o})})))},on=n(6),cn=n(406),ln={dragId:"drag",dragElementClass:"edge-drag-button"},un=n(51),sn=n.n(un),mn=function(e){if(!e.isDragging())return null;if(e.getItemType()!==ln.dragId)return null;var t=e.getClientOffset(),n=e.getInitialSourceClientOffset();return null===t||null===n?null:{current:t,initial:n}},dn=function(e){var t=Object(cn.a)(mn),n=s.useRef(null);if(null===t)return n.current=null,null;var a=function(e,t){var n=e.elements.viewport;if(null===n)throw Error("Viewport is null");var a={y:n.scrollTop,x:n.scrollLeft};return null===t.current&&(t.current=a),he(a,t.current)}(e,n);return s.createElement("div",{className:sn.a.container},s.createElement("svg",{className:sn.a.svg},s.createElement("line",{className:sn.a.line,x1:t.initial.x+14-a.x,y1:t.initial.y+12-a.y,x2:t.current.x-4,y2:t.current.y-4})),s.createElement("div",{className:sn.a.dot,style:{top:t.current.y-12,left:t.current.x-12},children:s.createElement(c.k,{path:on.a.locate,size:16})}))},fn=function(e){var t=new Map;return e.forEach((function(e){var n,a,r=null!==(n=t.get(e.from.table))&&void 0!==n?n:new Map;e.from.rows.forEach((function(t){var n,a=null!==(n=r.get(t))&&void 0!==n?n:{from:null,to:[]};a.from=e,r.set(t,a)})),t.set(e.from.table,r);var i=null!==(a=t.get(e.to.table))&&void 0!==a?a:new Map;e.to.rows.forEach((function(t){var n,a=null!==(n=i.get(t))&&void 0!==n?n:{from:null,to:[]};a.to.push(e),i.set(t,a)})),t.set(e.to.table,i)})),t},pn=n(187),vn=n.n(pn),bn=function(e){var t=[e.elements,e.table.id],n=t[0],a=t[1],r=s.useCallback(function(e,t){return function(n){if(null===n)e.tables.delete(t);else{var a,r=null!==(a=e.tables.get(t))&&void 0!==a?a:fe.newTable();r.element=n,e.tables.set(t,r)}}}(n,a),[n,a]);return s.createElement("div",{className:vn.a.container,key:e.table.id,ref:r,style:{top:e.table.position.top,left:e.table.position.left,zIndex:e.table.selected?1:0},children:e.children})},hn=function(e){var t=[e,e.row.id],n=t[0],a=n.elements,r=n.tableId,i=t[1],o=s.useMemo((function(){return function(e,t,n){return function(a){var r,i=null!==(r=e.tables.get(t))&&void 0!==r?r:fe.newTable();if(null===a)i.rows.delete(n);else{var o,c=null!==(o=i.rows.get(n))&&void 0!==o?o:fe.newRow();c.element=a,i.rows.set(n,c),e.tables.set(t,i)}}}(a,r,i)}),[a,r,i]),c=24+Math.max(je*(e.edgesToCount-1),0);return s.createElement("div",{ref:o,style:{height:c},children:e.children})},gn=function(e){return s.createElement(hn,Object.assign({},e,{children:null}))},wn=function(e,t){var n,a=50-(null!==(n=null===t||void 0===t?void 0:t.size)&&void 0!==n?n:0);if(a>=e.value.rows.length)return[e.value.rows,!1];if(e.rowsExpanded)return[e.value.rows,!0];var r=[],i=[];return e.value.rows.forEach((function(e){r.length<a||(null===t||void 0===t?void 0:t.has(e.id))?(i.length>0&&(r.push(i),i=[]),r.push(e)):i.push(e)})),i.length>0&&r.push(i),[r,!0]},En=function(e){return Array.isArray(e)?e[0].id:e.id},yn=function(e){var t=wn(e.table,e.tableEdges),n=Object(d.a)(t,1)[0],a=function(t){var n,a,r;return null!==(n=null===(a=e.tableEdges)||void 0===a||null===(r=a.get(t.id))||void 0===r?void 0:r.to.length)&&void 0!==n?n:0};return s.createElement("div",{className:[c.w.primary].join(" "),style:{width:Oe+2,padding:"0 1px"}},s.createElement("div",{style:{height:53}}),n.map((function(t){return Array.isArray(t)?s.createElement("div",{key:t[0].id,style:{height:24}}):s.createElement(gn,{key:En(t),row:t,edgesToCount:a(t),elements:e.elements,tableId:e.table.id})})),s.createElement("div",{style:{height:13}}))},_n=n(188),xn=n.n(_n),jn=n(189),On=n.n(jn),kn=function(e){return s.createElement("div",{className:On.a.container},s.createElement(c.c,{onClick:function(){var t={tableId:e.tableId};e.diagramDispatch({type:"add-row",payload:t})},icon:on.a.add,size:c.c.size.small,style:c.c.style.flat,isFullWidth:!0,children:"Add"}))},Dn=n(87),An=n.n(Dn),zn=function(e,t){return s.createElement("div",{key:e.id,className:[An.a.field,1===t?An.a.rightField:""].join(" "),style:{width:ke/2},children:e.value.name})},In=function(e){return s.createElement("div",{className:[c.w.secondary,c.x.weak,An.a.container,c.E.muted].join(" ")},s.createElement(c.j,{size:8}),s.createElement("div",{className:c.c.size.small.main},s.createElement(c.k,{path:on.a.blank,size:c.c.size.small.iconSize})),e.columns.slice(0,e.columnsExpanded?void 0:2).map(zn),s.createElement(c.c,{onClick:function(){return e.setColumnsExpanded((function(e){return!e}))},style:c.c.style.flat,size:c.c.size.small,icon:(t=e.columnsExpanded,t?on.a.doubleChevronLeft:on.a.doubleChevronRight)}),s.createElement(c.j,{size:8}));var t},Cn=function(e,t){var n=e.tables.find((function(e){return e.value.name===t.table}));if(void 0===n)throw Error("Table is undefined");var a=e.columns[0].value.name,r=t.rows.map((function(e){var t=n.value.rows.find((function(t){return t.value[a]===e}));if(void 0===t)throw Error("Row is undefined");return t.id}));return{table:n.id,rows:r}},Tn=function(e,t){var n=e.tables.find((function(e){return e.id===t.table}));if(void 0===n)throw Error("Table is undefined");var a=t.rows.map((function(t){var a=n.value.rows.find((function(e){return e.id===t}));if(void 0===a)throw Error("Row is undefined");var r=a.value[e.columns[0].value.name];if(void 0===r)throw Error("Name is undefined");return r}));return{table:n.value.name,rows:a}},Nn=function(){return{table:"",rows:[""]}},Sn=n(118),Mn=n.n(Sn),Ln=function(e){return s.createElement(c.a,{color:"secondary"},s.createElement("div",{className:Mn.a.container},s.createElement(c.n,null,s.createElement("div",{className:Mn.a.help},"You can also drag the green",s.createElement("br",null),"circle to create reference")),s.createElement(c.i,null),null!==e.remove&&s.createElement(s.Fragment,null,s.createElement(c.c,{onClick:e.remove,children:"Delete"}),s.createElement(c.j,{size:16})),s.createElement(c.c,{highlight:!0,type:"submit",children:"Create"})))},Pn=n(119),Bn=n.n(Pn),Fn=n(190),Hn=n.n(Fn),Rn=function(){return s.createElement("div",{className:[Hn.a.container,c.w.secondary].join(" ")},s.createElement(c.t,null,"Create reference"))},Vn=n(52),Qn=n.n(Vn),Xn=function(e,t){return function(n){e.setRows(function(e){return function(t){return t.filter((function(t,n){return n!==e}))}}(t)),n.stopPropagation(),n.nativeEvent.stopImmediatePropagation()}},Wn=function(e){var t;return s.createElement("div",null,s.createElement("datalist",{id:"".concat(null===(t=e.table)||void 0===t?void 0:t.id,"-rows")},function(e){if(null===e.table)return[];var t=e.diagram.columns[0].value.name;return e.table.value.rows.map((function(e){return e.value[t]})).filter((function(t){return!e.rows.includes(t)}))}(e).map((function(e){return s.createElement("option",{key:e,value:e})}))),e.rows.map((function(t,n){var a;return s.createElement("div",{className:Qn.a.row,key:n},s.createElement("div",{className:Qn.a.input},s.createElement(c.l,{value:t,setValue:function(t){e.setRows(function(e,t){return function(n){return n.map((function(n,a){return a===e?t:n}))}}(n,t))},list:"".concat(null===(a=e.table)||void 0===a?void 0:a.id,"-rows"),size:c.l.size.small,style:c.l.style.flat,placeholder:"Column"})),s.createElement(c.j,{size:8}),s.createElement(c.b,{color:"weak"}),s.createElement(c.j,{size:8}),0===n?s.createElement("div",{className:Qn.a.add},s.createElement(c.c,{onClick:function(){e.setRows((function(e){return e.concat("")}))},icon:on.a.add,style:c.c.style.flat,size:c.c.size.small,title:"Add column (Composite foreign key)"})):s.createElement("div",{className:Qn.a.remove},s.createElement(c.c,{onClick:Xn(e,n),icon:on.a.remove,style:c.c.style.flat,size:c.c.size.small,title:"Remove column from reference"})))})))},Kn=n(88),Yn=n.n(Kn),Un=function(e){return e.diagram.tables.map((function(e){return e.value.name}))},Gn=function(e){var t;return null!==(t=e.diagram.tables.find((function(t){return t.value.name===e.side.table})))&&void 0!==t?t:null},qn=function(e){return function(t){e.setSide((function(e){return Object(O.a)(Object(O.a)({},e),{},{table:t})}))}},Jn=function(e){return function(t){e.setSide((function(e){return Object(O.a)(Object(O.a)({},e),{},{rows:t(e.rows)})}))}},Zn=function(e){return s.createElement("div",{className:Yn.a.container},s.createElement("div",{className:Yn.a.label},s.createElement(c.o,null,e.label)),s.createElement(c.j,{size:8}),s.createElement("div",{className:Yn.a.table},s.createElement(c.l,{value:e.side.table,setValue:qn(e),autoFocus:e.autoFocus,size:c.l.size.small,style:c.l.style.flat,placeholder:"Table",list:{id:"".concat(e.label,"-table"),values:Un(e)}})),s.createElement(c.j,{size:8}),s.createElement(c.b,{color:"weak"}),s.createElement(c.j,{size:8}),s.createElement(Wn,{diagram:e.diagram,table:Gn(e),rows:e.side.rows,setRows:Jn(e)}))},$n=function(e){if(null===e.edge)return null;var t=e.edge.id;return function(){e.diagramDispatch({type:"remove-ref",payload:{id:t}})}},ea=function(e){var t=e.diagramDispatch,n=s.useContext(st),a=s.useState((function(){var t,a,r=null!==(t=null===(a=e.edge)||void 0===a?void 0:a.from)&&void 0!==t?t:e.defaultFrom;return Tn(n,r)})),r=Object(d.a)(a,2),i=r[0],o=r[1],l=s.useState((function(){return e.edge?Tn(n,e.edge.to):Nn()})),u=Object(d.a)(l,2),m=u[0],f=u[1],p=s.createElement("form",{id:"edge-create-form",className:Bn.a.form,onSubmit:function(a){var r;a.preventDefault(),function(e){try{var t={from:Cn(e.diagram,e.from),to:Cn(e.diagram,e.to)};e.diagramDispatch({type:"add-ref",payload:t})}catch(n){Object(c.B)(["Cannot create ref",n.message])}}({diagram:n,diagramDispatch:t,from:i,to:m}),null===(r=e.onDone)||void 0===r||r.call(e)}},s.createElement(Rn,null),s.createElement(c.b,{color:"weak"}),s.createElement(Zn,{label:"From",side:i,setSide:o,autoFocus:!1,diagram:n}),s.createElement(c.b,{color:"weak"}),s.createElement(Zn,{label:"To",side:m,setSide:f,autoFocus:!0,diagram:n}),s.createElement(c.b,{color:"weak"}),s.createElement(Ln,{remove:$n(e)})),v=Object(se.createPortal)(s.createElement("div",{className:Bn.a.backdrop}),document.querySelector("#portals"));return s.createElement(s.Fragment,null,p,v)},ta=function(e,t){if(t instanceof Element){var n=e.containerRef.current;if(null===n)throw Error("Table container is null");if(!n.contains(t)){if(!((a=t)instanceof Element&&null!==a.closest("#".concat("edge-create-form")))){var a,r=t.closest(".".concat(ln.dragElementClass));r instanceof HTMLDivElement&&"true"===r.dataset.dragging||e.setTableExpanded(!1)}}}},na=function(e){return function(t){var n=t.relatedTarget;t.currentTarget.contains(n)||t.target instanceof HTMLButtonElement||e.setTableExpanded(!0)}},aa=n(409),ra=n(26),ia=n.n(ra),oa=n(408),ca=n(181),la=n(191),ua=n.n(la),sa=function(e){var t=e.rowId,n=e.tableId,a=s.useRef(null),r=Object(oa.a)({item:{type:ln.dragId,rowId:t,tableId:n},begin:function(){return function(e){if(null!==e.edge){var t={id:e.edge.id};e.diagramDispatch({type:"remove-ref",payload:t})}}(e)},end:function(t,n){return function(e,t){var n=t.getDropResult();if(null!==n){var a={from:{table:e.tableId,rows:[e.rowId]},to:{table:n.tableId,rows:[n.rowId]}};e.diagramDispatch({type:"add-ref",payload:a})}}(e,n)},collect:function(t){return function(e,t){if(!1===t.isDragging())return!1;if(t.getItemType()!==ln.dragId)return!1;var n=t.getItem(),a=n.tableId,r=n.rowId;return e.tableId===a&&e.rowId===r}(e,t)}}),i=Object(d.a)(r,3),o=i[0],l=i[1],u=i[2];s.useEffect((function(){u(Object(ca.a)())}),[u]),s.useEffect((function(){l(a)}),[a,l]);var m=o||null!==e.edge;return s.createElement("div",{className:[ua.a.container,ln.dragElementClass].join(" "),ref:a,"data-dragging":o},s.createElement(c.q,{placement:"right",onClose:function(){var e,t;null===(e=a.current)||void 0===e||null===(t=e.querySelector("button"))||void 0===t||t.focus()},target:function(e){return s.createElement(c.c,{onClick:function(){return e.toggle()},size:c.c.size.small,style:c.c.style.flat,selected:e.opened,title:"Click or drag to create reference",icon:m?on.a.selection:on.a.circle})},content:function(){return s.createElement(ea,{defaultFrom:{table:e.tableId,rows:[e.rowId]},diagramDispatch:e.diagramDispatch,edge:e.edge})}}))},ma=n(192),da=n.n(ma),fa=["T","t","1","Y","y"],pa=function(e){return s.createElement("div",{className:[da.a.container].join(" ")},s.createElement(c.s,{value:(t=e.value,!!fa.includes(t.charAt(0))),setValue:function(t){e.setValue(t?"TRUE":"FALSE")},options:[{value:!0,label:"TRUE"},{value:!1,label:"FALSE"}],style:c.s.style.flat,size:c.s.size.small}));var t},va={current:!1,timeout:0},ba=n(53),ha=n.n(ba),ga=function(e){return s.createElement("div",{className:ha.a.edit},s.createElement(c.l,{key:e.value,defaultValue:e.value,style:c.l.style.flat,size:c.l.size.small,autoFocus:!0,onBlur:function(t){e.setValue(t.currentTarget.value),e.state.setIsEdit(!1)},onKeyDown:function(e){"Tab"===e.key&&(window.clearTimeout(va.timeout),va.current=!0,va.timeout=window.setTimeout((function(){va.current=!1}),500))},onKeyUp:function(t){"Enter"===t.key&&(e.setValue(t.currentTarget.value),e.state.setIsEdit(!1),function(e){var t=e.state.viewRef.current;if(null===t)throw Error("View is null");t.focus()}(e))}}))},wa=function(e){var t=e.value;return 0!==t.length?s.createElement("span",null,t):s.createElement("span",{className:ha.a.empty},"<empty>")},Ea=function(e){return s.createElement("div",{tabIndex:0,children:s.createElement(wa,{value:e.value}),className:[ha.a.view,c.z.always,c.l.size.small.main,"react-draggable-cancel","row-input-string-view"].join(" "),onDoubleClick:function(){e.state.setIsEdit(!0)},onFocus:function(){va.current&&e.state.setIsEdit(!0)},onKeyUp:function(t){"Enter"===t.key&&e.state.setIsEdit(!0)},ref:e.state.viewRef})},ya=function(e){var t=s.useState(!1),n=Object(d.a)(t,2),a=n[0],r={isEdit:a,setIsEdit:n[1],viewRef:s.useRef(null)};return s.createElement("div",{className:[ha.a.container].join(" ")},s.createElement(Ea,Object.assign({},e,{state:r})),a&&s.createElement(ga,Object.assign({},e,{state:r})))},_a=function(e){return function(t){var n=e.tableId,a=e.row,r=[e.column.value.name,a.id],i=r[0],o=r[1];if(t!==a.value[i]){var c={tableId:n,rowId:o,property:i,value:t};e.diagramDispatch({type:"update-row",payload:c})}}},xa=function(e){var t;return function(e){var t=e.column.value.type;switch(t){case"boolean":return pa;case"string":return ya;default:throw Error('Unknown column type "'.concat(t,'"'))}}(e)({value:null!==(t=e.row.value[e.column.value.name])&&void 0!==t?t:"",setValue:_a(e)})},ja={ArrowUp:"up",ArrowRight:"right",ArrowDown:"down",ArrowLeft:"left"},Oa=n(193),ka=n.n(Oa),Da=function(e){return m.a.createElement("div",{className:[ka.a.container].join(" ")},m.a.createElement(c.c,{onClick:function(){e.removeRow(fe.removeFieldName)},style:c.c.style.flat,size:c.c.size.small,icon:on.a.remove}))},Aa=function(e,t,n){return function(a){var r="rest"===n?ia.a.field:"first"===n?ia.a.field1st:[ia.a.field2nd,c.E.muted].join(" "),i="rest"===n?ke/2:void 0;return s.createElement("div",{className:[r].join(" "),style:{width:i},key:a.id,"data-row-field":a.value.name,ref:t.columnRef,onKeyDown:t.keyHandler},s.createElement(xa,{tableId:e.tableId,row:e.row,column:a,diagramDispatch:e.diagramDispatch}))}},za=function(e){var t=e.tableId,n=e.row,a=e.elements,r=e.rowIndex,i=e.tableNavigate,o=n.id,l=Object(aa.a)({accept:ln.dragId,drop:function(){return{tableId:t,rowId:o}},collect:function(e){return e.isOver()}}),u=Object(d.a)(l,2),m=u[0],f=u[1],p=s.useMemo((function(){return function(e,t,n){return function(a){var r,i,o=null!==(r=e.tables.get(t))&&void 0!==r?r:fe.newTable(),c=null!==(i=o.rows.get(n))&&void 0!==i?i:fe.newRow();if(null===a);else{var l=fe.getFieldName(a);c.fields.set(l,a),o.rows.set(n,c),e.tables.set(t,o)}}}(a,t,o)}),[a,t,o]),v=function(e){return function(t){var n=[e.tableId,e.row.id],a={rowId:n[1],tableId:n[0]};e.diagramDispatch({type:"remove-row",payload:a}),e.tableNavigate(e.rowIndex,t,"down")}}(e),b=function(e){return function(t){if(!(t.target instanceof HTMLInputElement)&&!(t.target instanceof HTMLTextAreaElement))switch(t.key){case"Backspace":case"Delete":var n=fe.getFieldName(t.currentTarget);e.removeRow(n),t.stopPropagation(),t.nativeEvent.stopImmediatePropagation(),t.preventDefault();break;case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":var a=ja[t.key];if(void 0===a)return;var r=fe.getFieldName(t.currentTarget);e.tableNavigate(e.rowIndex,r,a),t.preventDefault()}}}({rowIndex:r,tableNavigate:i,removeRow:v}),h={columnRef:p,keyHandler:b};return s.createElement(hn,e,s.createElement("div",{className:[ia.a.container,m?ia.a.over:""].join(" "),ref:f},s.createElement(c.j,{size:8}),e.tableExpanded&&s.createElement("div",{"data-row-remove":!0,ref:p,onKeyDown:b},s.createElement(Da,{tableId:e.tableId,rowId:e.row.id,removeRow:v})),s.createElement("div",{className:ia.a.fields,style:{width:ke}},Aa(e,h,"first")(e.columns[0]),Aa(e,h,"second")(e.columns[1])),e.columnsExpanded&&s.createElement("div",{className:ia.a.fields},e.columns.slice(2).map(Aa(e,h,"rest"))),e.tableExpanded&&s.createElement("div",{"data-row-edge":!0,ref:p,onKeyDown:b},s.createElement(sa,{tableId:e.tableId,rowId:e.row.id,diagramDispatch:e.diagramDispatch,edge:e.edgeFrom})),s.createElement(c.j,{size:8})))},Ia=function(e){return s.createElement(c.a,{color:"secondary"},s.createElement(c.b,{color:"weak"}),s.createElement("div",{style:{marginTop:-1}}),s.createElement(c.c,{style:c.c.style.flat,size:c.c.size.small,isFullWidth:!0,onClick:function(){e.diagramDispatch({type:"expand-table-rows",payload:{id:e.tableId,expanded:!0}})},children:"".concat(e.count," columns hidden")}),s.createElement("div",{style:{marginTop:-1}}),s.createElement(c.b,{color:"weak"}))},Ca=function(e){return s.createElement(c.c,{style:c.c.style.flat,size:c.c.size.small,isFullWidth:!0,onClick:function(){e.diagramDispatch({type:"expand-table-rows",payload:{id:e.tableId,expanded:!1}})},children:"Hide columns"})},Ta=fe.edgeFieldName,Na=fe.removeFieldName,Sa=function(e){return function(t,n,a){var r,i=e.tableId,o=e.rows,c=e.elements,l=e.columns,u=o[t];if(Array.isArray(u))throw Error("Cannot navigate from a group");var s=u,m=n,d=c.tables.get(i);if(void 0===d)throw Error("TableElements is undefined");switch(a){case"right":case"left":var f=d.rows.get(u.id);if(void 0===f)throw Error("RowElements is undefined");m=function(e,t,n,a){var r=function(){if(n===Na)return-1;if(n===Ta)return t.length;var e=t.findIndex((function(e){return e.value.name===n}));if(e>-1)return e;throw Error('Column "'.concat(n,'" not found'))}()+1*("right"===a?1:-1);if(r<0)return Na;if(r>t.length-1)return Ta;var i=t[r].value.name,o=e.fields.get(i);return void 0!==o&&o.isConnected?i:"right"===a?Ta:t[1].value.name}(f,l,n,a);break;case"up":case"down":s=function(e,t,n){for(var a=n,r="down"===t?1:-1;a>=0;){var i=e[a+=1*r];if(void 0===i)return null;if(!Array.isArray(i))return i}return null}(o,a,t);break;default:return}if(null!==s&&null!==m&&(s!==u||m!==n)){var p=d.rows.get(s.id),v=null!==(r=null===p||void 0===p?void 0:p.fields.get(m))&&void 0!==r?r:void 0;if(void 0===v)throw Error("Next target is undefined");!function(e){var t=e.querySelector("select,input,button,[tabindex]");if(!(t instanceof HTMLElement))throw Error("No focusable child");t.focus()}(v)}}},Ma=function(e){var t,n,a,r=null===(t=e.tableEdges)||void 0===t?void 0:t.get(e.row.id);return s.createElement(za,{row:e.row,rowIndex:e.rowIndex,edgeFrom:null!==(n=null===r||void 0===r?void 0:r.from)&&void 0!==n?n:null,edgesToCount:null!==(a=null===r||void 0===r?void 0:r.to.length)&&void 0!==a?a:0,tableNavigate:e.tableNavigate,tableExpanded:e.tableExpanded,tableId:e.table.id,columnsExpanded:e.columnsExpanded,elements:e.elements,diagramDispatch:e.diagramDispatch,columns:e.columns})},La=function(e){var t=e.table,n=e.tableEdges,a=e.columns,r=e.elements,i=e.diagramDispatch,o=t.id,c=s.useMemo((function(){return wn(t,n)}),[t,n]),l=Object(d.a)(c,2),u=l[0],m=l[1],f=s.useMemo((function(){return Sa({rows:u,tableId:o,columns:a,elements:r})}),[a,u,r,o]);return s.createElement("div",null,u.map((function(t,n){return Array.isArray(t)?s.createElement(Ia,{key:t[0].id,count:t.length,diagramDispatch:i,tableId:o}):s.createElement(Ma,Object.assign({key:t.id},e,{row:t,rowIndex:n,tableNavigate:f}))})),m&&t.rowsExpanded&&s.createElement(Ca,{tableId:o,diagramDispatch:i}))},Pa=n(54),Ba=n.n(Pa),Fa=function(e,t){if(t!==e.table.value.name){var n={id:e.table.id,name:t};e.diagramDispatch({type:"rename-table",payload:n})}},Ha=function(e){return s.createElement("div",{className:[Ba.a.view,c.l.size.small.main].join(" "),onMouseDown:function(t){e.state.offset.current.x=t.clientX,e.state.offset.current.y=t.clientY},onClick:function(t){var n=e.state.offset.current,a=n.x,r=n.y,i=t.clientX,o=t.clientY;a===i&&r===o&&e.state.setIsEdit(!0)},children:e.table.value.name})},Ra=function(e){return s.createElement(c.l,{key:e.table.value.name,defaultValue:e.table.value.name,onBlur:function(t){Fa(e,t.currentTarget.value),e.state.setIsEdit(!1)},onFocus:function(){e.setTableExpanded(!1)},onKeyUp:function(t){"Enter"===t.key&&(Fa(e,t.currentTarget.value),e.state.setIsEdit(!1))},style:c.l.style.flat,size:c.l.size.small,autoFocus:!0})},Va=function(e){var t=s.useState(!1),n=Object(d.a)(t,2),a=n[0],r={setIsEdit:n[1],offset:s.useRef({x:0,y:0})};return s.createElement("div",{className:[Ba.a.container,e.tableExpanded?Ba.a.expanded:"","random"].join(" ")},s.createElement("div",{className:Ba.a.main,style:{width:ke}},a?s.createElement(Ra,Object.assign({},e,{state:r})):s.createElement(Ha,Object.assign({},e,{state:r}))))},Qa=n(40),Xa=n.n(Qa),Wa=function(e){return function(t){if(!e.table.selected){var n=t.shiftKey||t.ctrlKey||t.metaKey,a={tableIds:new Set([e.table.id]),append:n};e.diagramDispatch({type:"select-some-tables",payload:a})}}},Ka=function(e){return function(t,n){var a=[ve(n.y),ve(n.x)],r=a[0],i=a[1];if(0!==i||0!==r){var o={top:r,left:i};e.diagramDispatch({type:"move-selected-tables",payload:o}),e.previewDrag(e.table.id,{top:0,left:0})}}},Ya=function(e){return function(t,n){var a=[ve(n.y),ve(n.x)],r=a[0],i=a[1];e.previewDrag(e.table.id,{top:r,left:i})}},Ua=function(e){var t=s.useRef(null),n=s.useContext(ue).preferences.zoom,a=s.useState(!1),r=Object(d.a)(a,2),i=r[0],o=r[1],l=s.useState(!1),u=Object(d.a)(l,2),m=u[0],f=u[1],p=s.useMemo((function(){return{setTableExpanded:o,containerRef:t}}),[o,t]);return s.useEffect((function(){if(!1!==i){var e=function(e){ta(p,e.target)};return document.addEventListener("mouseup",e),function(){return document.removeEventListener("mouseup",e)}}}),[p,i]),s.createElement(xn.a,{position:{x:0,y:0},grid:[je,je],onDrag:Ya(e),onStop:Ka(e),nodeRef:t,scale:n,cancel:"input, button, select, .react-draggable-cancel",onMouseDown:Wa(e)},s.createElement("div",{className:[Xa.a.container,c.w.primary,c.x.strong,c.y.strong,e.table.selected?Xa.a.selected:"",i?Xa.a.expanded:""].join(" "),ref:t},s.createElement(Va,{table:e.table,diagramDispatch:e.diagramDispatch,tableExpanded:i,setTableExpanded:o}),s.createElement(c.b,{color:"weak"}),s.createElement("div",{className:Xa.a.body,onFocus:na(p)},s.createElement(c.j,{size:8}),s.createElement("div",{style:{height:3}}),i&&s.createElement("div",{className:Xa.a.columns},s.createElement(In,{columns:e.columns,columnsExpanded:m,setColumnsExpanded:f})),s.createElement(La,{table:e.table,tableEdges:e.tableEdges,columnsExpanded:m,tableExpanded:i,columns:e.columns,elements:e.elements,diagramDispatch:e.diagramDispatch}),s.createElement("div",{style:{height:4}}),(i||0===e.table.value.rows.length)&&s.createElement(kn,{tableId:e.table.id,diagramDispatch:e.diagramDispatch}),s.createElement(c.j,{size:8}))))},Ga=function(e){var t=s.useState(!1),n=Object(d.a)(t,2),a=n[0],r=n[1],i=e.elements,o=e.table.id;return s.useEffect((function(){return function(e,t,n){var a,r,i=new IntersectionObserver((function(e){e.forEach((function(e){n(e.isIntersecting)}))}),{threshold:0,root:e.viewport}),o=null!==(a=null===(r=e.tables.get(t))||void 0===r?void 0:r.element)&&void 0!==a?a:null;if(null===o)throw Error("Table is null");return i.observe(o),function(){return i.disconnect()}}(i,o,r)}),[i,o]),s.createElement(bn,e,a?s.createElement(Ua,{table:e.table,tableEdges:e.tableEdges,columns:e.columns,diagramDispatch:e.diagramDispatch,previewDrag:e.previewDrag,elements:e.elements}):s.createElement(yn,{table:e.table,tableEdges:e.tableEdges,elements:e.elements}))},qa=n(407),Ja=n(112),Za=n(20),$a=n.n(Za),er=function(e){return function(t,n){!function(e,t,n){var a="translate(".concat(n.left,"px, ").concat(n.top,"px)");e.tables.forEach((function(n){var r,i;if(t!==n){var o=null!==(r=null===(i=e.elements.tables.get(n))||void 0===i?void 0:i.element)&&void 0!==r?r:null;if(null===o)throw Error("Table is null");o.style.transform=a}}))}(e,t,n),window.setTimeout((function(){return function(e){var t=e.edges,n=e.elements,a=Ut({edges:t,elements:n});t.forEach((function(e){var t=n.edges.get(e.id),r=a.get(e.id);if(void 0===t)throw Error("Edge is undefined");if(void 0===r)throw Error("Edge paths is undefined");var i=0,o=function(e){var n=t.children.item(i);if(!(n instanceof SVGPathElement))throw Error("Element is not SVGPath");n.setAttribute("d",e),i+=1};r.from.forEach(o),r.to.forEach(o),o(r.main);var c=t.children.item(i);if(c instanceof SVGCircleElement){var l=c.firstElementChild;if(!(l instanceof SVGAnimateMotionElement))throw Error("Element is not SVGAnimationMotion");l.setAttribute("path","")}}))}(e)}),0)}},tr=n(85),nr=n.n(tr),ar=function(e,t){var n=Math.min(e.top,t.top),a=Math.max(e.left,t.left),r=Math.max(e.top,t.top),i=Math.min(e.left,t.left);return{top:n,left:i,width:a-i,height:r-n}},rr=function(e,t){e.style.width="".concat(t.width,"px"),e.style.height="".concat(t.height,"px"),e.style.transform="translate(".concat(t.left,"px, ").concat(t.top,"px)")},ir=function(e){var t=document.createElement("div");t.classList.add(nr.a.indicator);var n=ar(e,e);return rr(t,n),t},or=rr,cr=ar,lr="temp-selected",ur=function(e){return{tables:Object(te.a)(e.elements.tables.entries()).map((function(t){var n=Object(d.a)(t,2),a=n[0],r=n[1].element;if(null===r)throw Error("Table is null");var i=r.getBoundingClientRect(),o=i.width,c=i.height,l=be(i,e.offset);return{id:a,box:{width:o,height:c,top:l.top,left:l.left},element:r}})),edges:e.edges.map((function(t){var n=e.elements.edges.get(t.id);if(void 0===n)throw Error("Edge is undefined");return{model:t,element:n}}))}},sr=function(e,t){var n=new Set;e.tables.forEach((function(e){var a=_e(t,e.box);a&&n.add(e.id),e.element.classList.toggle(lr,a)})),e.edges.forEach((function(e){var t=[e.model.from.table,e.model.to.table],a=t[0],r=t[1],i=n.has(a)||n.has(r);e.element.classList.toggle(lr,i)}))},mr=function(e,t){return e.tables.filter((function(e){return _e(e.box,t)})).map((function(e){return e.id}))},dr=function(e){e.tables.forEach((function(e){e.element.classList.remove(lr)}))},fr=document.documentElement,pr=function(e){return function(t){t.preventDefault();var n=t.clientX,a=t.clientY,r=be({left:n,top:a},e.offset),i=cr(e.start,r);or(e.indicator,i),sr(e.overlap,i)}},vr=function(e,t,n,a){return function r(i){var o,c=i.clientX,l=i.clientY,u=be({left:c,top:l},e.offset),s=cr(e.start,u),m=new Set(mr(e.overlap,s));m.size>0&&t.diagramDispatch({type:"select-some-tables",payload:{tableIds:m,append:!1}}),e.canvas.style.zIndex="0",e.indicator.remove(),dr(e.overlap),fr.removeEventListener("mousemove",n),fr.removeEventListener("mouseup",r),null===(o=t.elements.viewport)||void 0===o||o.removeEventListener("scroll",a)}},br=function(e){var t=s.useRef(null),n=e.elements,a=e.diagramDispatch,r=e.edges;return s.useEffect((function(){var e=t.current;if(null===e)throw Error("Element is null");var i=function(e){return function(t){var n,a;if(!(null===(n=e.elements.viewport)||void 0===n?void 0:n.classList.contains("dragscroll"))){e.diagramDispatch({type:"select-all-tables",payload:{selected:!1}});var r=t.target;if(!(r instanceof HTMLElement))throw Error("Canvas is not an HTMLElement");r.style.zIndex="2";var i=r.getBoundingClientRect(),o={top:i.top,left:i.left},c=function(){var e=t.clientX,n=t.clientY;return be({top:n,left:e},o)}(),l=ir(c);r.appendChild(l);var u=e.elements,s=e.edges,m=ur({offset:o,elements:u,edges:s}),d={offset:o,start:c,indicator:l,canvas:r,overlap:m},f=pr(d);fr.addEventListener("mousemove",f);var p=function(e){return function(){var t=e.canvas.getBoundingClientRect(),n=t.top,a=t.left;e.offset={top:n,left:a}}}(d);null===(a=e.elements.viewport)||void 0===a||a.addEventListener("scroll",p);var v=vr(d,e,f,p);fr.addEventListener("mouseup",v)}}}({elements:n,diagramDispatch:a,edges:r});return e.addEventListener("mousedown",i),function(){return e.removeEventListener("mousedown",i)}}),[n,a,r]),s.createElement("div",{className:nr.a.container,ref:t})},hr=function(e,t){var n=t.width,a=t.height,r=(e-1)/2;return{width:n,height:a,margin:"".concat(a*r,"px ").concat(n*r,"px"),transform:1!==e?"scale(".concat(e,")"):"",fontSize:"mac"===l?12:void 0}},gr=function(e){var t=e.diagram,n=e.elements,a=t.tables,r=t.refs,i=s.useContext(ue).preferences,o=s.useMemo((function(){var e=a.filter((function(e){return e.selected})).map((function(e){return e.id}));return er({tables:e,edges:r,elements:n})}),[a,r,n]),l=s.useMemo((function(){return fn(r)}),[r]),u=s.createElement("div",{className:$a.a.container,style:hr(i.zoom,t.size),ref:function(t){e.elements.canvas=t}},s.createElement("div",{className:[$a.a.background,c.w.secondary].join(" ")}),s.createElement("div",{className:[$a.a.background,$a.a.grid].join(" ")}),s.createElement(br,{elements:n,edges:r,diagramDispatch:e.diagramDispatch}),s.createElement(rn,{diagram:t,diagramDispatch:e.diagramDispatch,elements:n}),e.diagram.tables.map((function(a){var r;return s.createElement(Ga,{key:a.id,table:a,tableEdges:null!==(r=l.get(a.id))&&void 0!==r?r:null,elements:n,columns:t.columns,diagramDispatch:e.diagramDispatch,previewDrag:o})})),s.createElement(dn,{elements:n}));return s.createElement(qa.a,{backend:Ja.a},u)},wr=n(194),Er=n.n(wr),yr=["Please copy from the textbox below:","Your system doesn't allow us to write to your clipboard automatically"],_r=function(){var e=Object(v.a)(p.a.mark((function e(t,n){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.writeText(t);case 3:return e.abrupt("return",!0);case 6:return e.prev=6,e.t0=e.catch(0),a=null!==n&&void 0!==n?n:yr,e.next=11,Object(c.D)(a,t,!0);case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),xr=function(e,t){var n=e.get(t.table);if(!n)throw Error('Table Ids "'.concat(t.table,'" not found'));var a=t.rows.map((function(e){var t=n.rows.get(e);if(!t)throw Error('Row id "'.concat(e,'" not found'));return t})),r=n.table;return{name:r.name,schema:r.schema,rows:a}},jr=function(e){return{type:"base",version:2,columns:e.columns.map((function(e){return e.value})),items:e.tables.map((function(e){return{schema:e.value.schema,name:e.value.name,id:e.value.id,rows:e.value.rows.map((function(e){return e.value}))}})),refs:function(){var t=function(e){var t=new Map;return e.forEach((function(e){var n=new Map;e.value.rows.forEach((function(e){n.set(e.id,e.value.id)}));var a={name:e.value.name,schema:e.value.schema};t.set(e.id,{table:a,rows:n})})),t}(e.tables);return e.refs.map((function(e){return{from:xr(t,e.from),to:xr(t,e.to)}}))}(),schema:e.schema}},Or=function(e,t,n){var a="edit"===t?e:jr(e),r=JSON.stringify(a);return"json"===n?r:_(r)},kr=function(e){var t=Object(O.a)({},e);t.tables=t.tables.filter((function(e){return e.selected}));var n=new Set(t.tables.map((function(e){return e.id})));return t.refs=t.refs.filter((function(e){return n.has(e.from.table)&&n.has(e.to.table)})),Or(t,"edit","json")},Dr=function(e){return function(t){var n;if(!(t.target instanceof HTMLInputElement)&&!(t.target instanceof HTMLAreaElement)){t.preventDefault();var a=kr(e.diagram);null===(n=t.clipboardData)||void 0===n||n.setData("text/plain",a)}}},Ar=n(195),zr=n.n(Ar),Ir=function(e){var t=e.elements,n=e.diagram,a=s.useState(null),r=Object(d.a)(a,2),i=r[0],o=r[1];s.useEffect((function(){var e=t.canvas;if(null===e)throw Error("Canvas is null");e.addEventListener("contextmenu",(function(e){var n=e.target;if(null!==n&&!(n instanceof HTMLInputElement)&&!(n instanceof HTMLTextAreaElement)&&n instanceof HTMLElement)for(var a=n,r=function(e){var t=Object(te.a)(e.tables.values()).map((function(e){return e.element})).filter((function(e){return null!==e}));return new Set(t)}(t);null!==a;)r.has(a)&&(e.preventDefault(),o({top:e.clientY,left:e.clientX})),a=a.parentElement}))}),[t,n]);var l=function(e){return function(){o(null),e()}};return i?s.createElement("div",{className:zr.a.container,style:{top:i.top,left:i.left}},s.createElement(c.m,{items:[{label:"Copy",fn:l((function(){return function(e){var t=kr(e.diagram);_r(t)}(e)}))},{label:"Duplicate",fn:l((function(){return function(e){e.diagramDispatch({type:"duplicate-selected-table"})}(e)}))},"divider",{label:"Delete",fn:l((function(){return function(e){e.diagramDispatch({type:"remove-selected-items"})}(e)}))}],onEsc:function(){return o(null)}})):null},Cr=n(120),Tr=n.n(Cr),Nr=(n(399),function(e){var t=e.currentTarget;if(t instanceof HTMLDivElement)return t;throw Error("Element is not div")}),Sr=function e(t){var n=Nr(t);n.addEventListener("keydown",Mr),n.removeEventListener("keyup",e),n.classList.remove("dragscroll"),Tr.a.reset()},Mr=function e(t){if(" "===t.key&&!(t.target instanceof HTMLInputElement)&&!(t.target instanceof HTMLTextAreaElement)){var n=Nr(t);n.addEventListener("keyup",Sr),n.removeEventListener("keydown",e),n.classList.add("dragscroll"),Tr.a.reset()}},Lr=function(e){if(" "===e.key){if(e.target instanceof HTMLInputElement)return;if(e.target instanceof HTMLTextAreaElement)return;e.preventDefault()}},Pr=function(){var e=s.useContext(ue),t=e.preferences,n=e.setPreferences;return s.createElement(c.f,{value:t.edgeAnimation,setValue:function(e){n((function(t){return Object(O.a)(Object(O.a)({},t),{},{edgeAnimation:e})}))},children:"Show animation on highlighted arrows"})},Br=function(e){var t={elements:e.elements};e.diagramDispatch({type:"auto-arrange",payload:t})},Fr=function(e,t){var n={expanded:t};e.diagramDispatch({type:"expand-all-tables-rows",payload:n}),window.setTimeout((function(){Br(e)}),0)},Hr=function(e){return s.createElement(c.d,null,[s.createElement(c.c,{key:"arrange",icon:on.a.layoutAuto,onClick:function(){return Br(e)},children:"Arrange",size:Ki,title:"Auto-arrange tables"}),s.createElement(c.e,{key:"more",button:{icon:on.a.caret,size:Ki,title:"More arrange options"},items:[{label:"Expand all columns and Arrange",fn:function(){return Fr(e,!0)}},{label:"Collapse columns and Arrange",fn:function(){return Fr(e,!1)}}]})])},Rr=n(89),Vr=n.n(Rr),Qr=function(e){return s.createElement(hn,e,s.createElement("div",{className:Vr.a.container,style:{width:ke}},s.createElement("div",{className:Vr.a.first},e.row.value[e.columns[0].value.name]),s.createElement("div",{className:[Vr.a.second,c.E.muted].join(" ")},e.row.value[e.columns[1].value.name])))},Xr=n(55),Wr=n.n(Xr),Kr=[c.w.primary,c.x.strong,Wr.a.container].join(" "),Yr=function(e){var t,n,a;return s.createElement(Qr,{key:e.row.id,edgesToCount:null!==(t=null===(n=e.tableEdges)||void 0===n||null===(a=n.get(e.row.id))||void 0===a?void 0:a.to.length)&&void 0!==t?t:0,elements:e.elements,tableId:e.table.id,row:e.row,columns:e.columns})},Ur=function(e){var t=wn(e.table,e.tableEdges),n=Object(d.a)(t,1)[0];return s.createElement(bn,e,s.createElement("div",{className:Kr},s.createElement("div",{className:Wr.a.title},e.table.value.name),s.createElement(c.b,{color:"weak"}),s.createElement("div",{className:Wr.a.body},n.map((function(t){return Array.isArray(t)?s.createElement("div",{className:Wr.a.group,key:t[0].id,children:"".concat(t.length," columns hidden")}):s.createElement(Yr,Object.assign({key:t.id},e,{row:t}))})))))},Gr=function(e){var t=s.useContext(ue).preferences,n=fn(e.diagram.refs);return s.createElement("div",{className:$a.a.container,style:hr(t.zoom,e.diagram.size),ref:function(t){e.elements.canvas=t}},s.createElement("div",{className:[$a.a.background,c.w.secondary].join(" ")}),s.createElement("div",{className:[$a.a.background,$a.a.grid].join(" ")}),s.createElement(rn,{diagram:e.diagram,diagramDispatch:function(){},elements:e.elements}),e.diagram.tables.map((function(t){var a;return s.createElement(Ur,{key:t.id,table:t,tableEdges:null!==(a=n.get(t.id))&&void 0!==a?a:null,elements:e.elements,columns:e.diagram.columns})})))},qr=n(196),Jr=n.n(qr),Zr=function(e,t){switch(l){case"mac":return void window.webkit.messageHandlers[e].postMessage(t);case"win":var n={message:e,args:t};return void window.CefSharp.PostMessage(n);case"web":throw Error('Cannot post message to "web" host')}},$r={png:{extension:"png",isBase64:!0,mime:"image/png;base64"},svg:{extension:"svg",isBase64:!1,mime:"image/svg+xml;charset=utf-8"},diagram:{extension:"diagram",isBase64:!1,mime:"text/plain"}},ei=function(e){var t=e;return["&%23xA;","&%239;"].forEach((function(e){t=t.split(e).join("")})),t},ti=function(e){switch(l){case"web":return function(e){var t=$r[e.format],n=document.createElement("a");n.download="".concat(e.name,".").concat(t.extension),n.href="data:".concat(t.mime,",").concat(e.content),n.click()}(e);case"mac":case"win":return function(e){var t=$r[e.format];Zr("saveFile",{data:t.isBase64?e.content:_(ei(e.content)),ext:t.extension,name:e.name,title:"Save ".concat(e.name," as")})}(e)}},ni=n(197),ai=n.n(ni),ri=CSSStyleDeclaration.prototype;Object.defineProperty(ri,"cssText",{value:""}),Object.defineProperty(ri,"getPropertyValueOriginal",{value:ri.getPropertyValue}),Object.defineProperty(ri,"getPropertyValue",{value:function(e){var t=this.getPropertyValueOriginal(e);return"marker-start"===e&&t.endsWith('edge-from")')?"url(#edge-from)":"marker-end"===e&&t.endsWith('edge-to")')?"url(#edge-to)":t}});var ii=function(){var e=Object(v.a)(p.a.mark((function e(t,n){var a,r,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.format,r=n.scale,e.t0=a,e.next="png"===e.t0?4:"svg"===e.t0?8:11;break;case 4:return e.next=6,ai()(t,{scale:r});case 6:return i=e.sent,e.abrupt("return",i.toDataURL());case 8:return e.next=10,Jr.a.toSvg(t);case 10:return e.abrupt("return",e.sent);case 11:throw Error('Unknown format "'.concat(a,'"'));case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),oi=function(){var e=Object(v.a)(p.a.mark((function e(t,n){var a,r,i,o,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=document.createElement("div")).style.position="fixed",a.style.top="-100000",document.body.appendChild(a),r=fe.newDiagram(),i=s.createElement(Gr,{elements:r,diagram:t}),se.render(i,a),e.next=9,new Promise((function(e){return setTimeout(e,100)}));case 9:if((o=a.firstElementChild)instanceof HTMLElement){e.next=12;break}throw Error("Canvas is not rendered");case 12:return e.next=14,ii(o,n);case 14:c=(c=e.sent).slice(c.indexOf(",")+1),ti({content:c,format:n.format,name:"diagram"}),se.unmountComponentAtNode(a),document.body.removeChild(a);case 19:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ci=function(e){return[["Save as PNG (High quality)","png",2],["Save as PNG (Low quality)","png",1],["Save as SVG (Web page)","svg",1]].map((function(t){var n=Object(d.a)(t,3),a=n[0],r=n[1],i=n[2];return{label:a,fn:function(){return oi(e,{format:r,scale:i})}}}))},li=function(){return s.createElement("span",null,s.createElement("span",null,"Please download "),s.createElement("a",{href:"https://tableplus.com",children:"TablePlus"}),s.createElement("span",null," app and install the Diagram plugin "),s.createElement("span",null,"(Cmd + L on Mac or Ctrl + L on Windows)"))},ui=function(e){if(u)throw Error("Already inside an AppHost");Object(c.B)([e,s.createElement(li,null)])},si=["MySQL","MariaDB","SQLite","PostgreSQL","Cassandra","Snowflake","MicrosoftSQLServer"],mi=function(e){return si.map((function(t){return{label:"Export to ".concat(t),fn:function(){var n=jr(e);Zr("exportSQL",{data:n,driver:t})}}}))},di=function(e){return u?mi(e):[{label:"Export to database",fn:function(){ui("Export to database requires TablePlus app")}}]},fi=function(e){return Or(e,"edit","json")},pi=function(){var e=Object(v.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=fi(t),e.next=3,_r(n,["Please copy your diagram from the text box below:",'To import it, go to "Import" > "Import from text"']);case 3:if(!e.sent){e.next=7;break}return e.next=7,Object(c.B)(["Your diagram is copied to clipboard",'To import it, go to "Import" > "Import from text"']);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),vi=function(e,t){ti({format:"diagram",name:null!==t&&void 0!==t?t:"diagram",content:fi(e)})},bi=function(e){return m.a.createElement(c.e,{items:[].concat(Object(te.a)((t=e.diagram,[{label:"Save to file",fn:function(){return vi(t)}},{label:"Copy to clipboard",fn:function(){return pi(t)}}])),["divider"],Object(te.a)(ci(e.diagram)),["divider"],Object(te.a)(di(e.diagram))),button:{icon:on.a.share,size:Ki,title:"Export & Share"}});var t},hi=function(){var e=s.useContext(ue),t=e.preferences,n=e.setPreferences;return s.createElement(c.f,{value:t.footerVisible,setValue:function(e){n((function(t){return Object(O.a)(Object(O.a)({},t),{},{footerVisible:e})}))},children:"Show footer"})},gi=n(13),wi=n.n(gi),Ei=function(e){return s.createElement(c.d,null,[s.createElement(c.c,{key:"undo",onClick:function(){return e.diagramHistoryDispatch({type:"undo"})},icon:on.a.undo,size:Ki,disabled:0===e.diagramHistory.past.length,title:"Undo"}),s.createElement(c.c,{key:"redo",onClick:function(){return e.diagramHistoryDispatch({type:"redo"})},icon:on.a.redo,size:Ki,disabled:0===e.diagramHistory.future.length,title:"Redo"})])},yi=n(198),_i=n(199),xi=[{title:"Empty",source:pe},{title:"Airlines",source:yi},{title:"Imdb",source:n(200)},{title:"Employees",source:_i}],ji=function(){var e=Object(v.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=["Paste a diagram into the textbox below",'To export diagrams as text, go to "Export" > "Copy to clipboard"'],e.next=3,Object(c.D)(n,void 0,!0);case 3:if(null!==(a=e.sent)&&a){e.next=6;break}return e.abrupt("return");case 6:t(a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Oi=function(e){return[{label:"Open file\u2026",fn:function(){return function(e){var t=document.createElement("input");t.type="file",t.addEventListener("change",(function(t){var n=t.target.files[0],a=new FileReader;a.readAsText(n),a.addEventListener("load",(function(t){var n,a=null===(n=t.target)||void 0===n?void 0:n.result;if("string"!==typeof a)throw Error("Unknown content type: ".concat(typeof a));e(a)}))})),t.click()}(e)}},{label:"Import from text\u2026",fn:function(){return ji(e)}}]},ki=function(e,t,n){var a=L(n);t({type:"replace",payload:{diagram:a}}),window.setTimeout((function(){t({type:"auto-arrange",payload:{elements:e}})}),0)},Di=function(e){var t=ki.bind(null,e.elements,e.diagramDispatch),n=[].concat(Object(te.a)(Oi(t)),["divider"],Object(te.a)(function(e){return xi.map((function(t){return{label:"Load the ".concat(t.title," sample"),fn:function(){return e(t.source)}}}))}(t))),a=function(){if(u)return[];return[{label:"Generate from database\u2026",fn:function(){ui("Generate from database require TablePlus app")}}]}();return a.length>0&&n.push.apply(n,["divider"].concat(Object(te.a)(a))),s.createElement(c.e,{button:{size:Ki,icon:on.a.import,children:"Import",title:"Import a diagram"},items:n})},Ai=function(e){return Object(O.a)(Object(O.a)({},e),{},{libraryVisible:!e.libraryVisible})},zi=function(){var e=s.useContext(ue);return s.createElement(c.c,{onClick:function(){e.setPreferences(Ai)},selected:e.preferences.libraryVisible,size:Ki,icon:on.a.menuOpen})},Ii=function(e){return s.createElement(c.c,{selected:e.more,onClick:function(){return e.setMore((function(e){return!e}))},icon:on.a.more,size:Ki,title:"More"})},Ci=function(){return s.createElement(s.Fragment,null,s.createElement(c.p,null,"Thank you for helping us improve the app. We will treat your report as confidential and anonymous."),s.createElement(c.j,{size:8}),s.createElement(c.p,null,"Please describe the issue, including any steps to reproduce it:"),s.createElement(c.j,{size:8}))},Ti=function(e){return s.createElement(c.c,{onClick:function(){return e.cancel()},children:"Cancel"})},Ni=function(){var e=s.useState(!1),t=Object(d.a)(e,2),n=t[0],a=t[1],r=function(){return a(!1)};return s.createElement(s.Fragment,null,s.createElement(c.c,{onClick:function(){return a(!0)},selected:n,size:Ki,icon:on.a.issue,children:"Report issue"}),n&&s.createElement(J,{type:"manual",title:"Report an Issue",description:s.createElement(Ci,null),footer:s.createElement(Ti,{cancel:r}),onDone:r}))},Si=function(e,t){var n,a=e.tables.get(t);if(void 0===a)throw Error("Table ".concat(t," is undefined"));null===(n=a.element)||void 0===n||n.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},Mi=function(e){var t=s.useState(""),n=Object(d.a)(t,2),a=n[0],r=n[1],i=s.useMemo((function(){var t=new Map,n=new Set;return e.diagram.tables.forEach((function(e){n.add(e.value.name),t.set(e.value.name,e.id)})),[n,t]}),[e.diagram.tables]),o=Object(d.a)(i,2),l=o[0],u=o[1],m=function(t){var n=u.get(t);void 0!==n&&function(e,t){var n={tableIds:new Set([t]),append:!1};e.diagramDispatch({type:"select-some-tables",payload:n}),Si(e.elements,t)}(e,n)};return s.createElement(c.l,{icon:on.a.search,placeholder:"Find table\u2026",value:a,setValue:function(e){r(e),m(e)},list:{id:"header-search",values:Object(te.a)(l)},onKeyUp:function(e){"Enter"===e.key&&m(a)},size:Yi})},Li=n(201),Pi=n.n(Li),Bi=n(56),Fi=n.n(Bi),Hi=n(57),Ri=n.n(Hi),Vi=function(){switch(l){case"web":return{container:"",main:"",more:"",box:""};case"mac":return{container:Fi.a.container,main:Fi.a.main,more:Fi.a.more,box:Fi.a.box};case"win":return{container:Ri.a.container,main:Ri.a.main,more:Ri.a.more,box:Ri.a.box}}}(),Qi=function(e){return m.a.createElement(c.c,{onClick:function(){var t=Ve(e.diagram.tables.map((function(e){return e.id}))),n={id:t,position:null};e.diagramDispatch({type:"add-table",payload:n}),window.setTimeout((function(){Si(e.elements,t)}),0)},size:Ki,icon:on.a.plus,children:"Table",title:"Add a table to the diagram"})},Xi=[{value:"light",label:"Light",icon:on.a.flash,key:"light"},{value:"auto",label:"System",key:"auto"},{value:"dark",label:"Dark",icon:on.a.moon,key:"dark"}],Wi=function(){var e=s.useContext(ue),t=e.preferences,n=e.setPreferences;return s.createElement(c.u,{value:t.theme,setValue:function(e){return n((function(t){return Object(O.a)(Object(O.a)({},t),{},{theme:e})}))},options:Xi,size:Ki})},Ki="mac"===l?c.c.size.small:c.c.size.medium,Yi="mac"===l?c.l.size.small:c.l.size.medium,Ui="mac"===l?c.s.size.small:c.s.size.medium,Gi=[wi.a.box,Vi.box].join(" "),qi=[wi.a.container,Vi.container].join(" "),Ji=[wi.a.main,Vi.main].join(" "),Zi=[wi.a.more,Vi.more].join(" "),$i=function(e){return s.createElement(s.Fragment,null,s.createElement("div",{className:[Gi,wi.a.boxEdit].join(" ")},s.createElement(Di,{elements:e.elements,diagramDispatch:e.diagramHistoryDispatch})),s.createElement("div",{className:[Gi,wi.a.boxEdit].join(" ")},s.createElement(Qi,{diagram:e.diagramHistory.present,diagramDispatch:e.diagramHistoryDispatch,elements:e.elements})),s.createElement("div",{className:[Gi,wi.a.boxEdit].join(" ")},s.createElement(Ei,{diagramHistory:e.diagramHistory,diagramHistoryDispatch:e.diagramHistoryDispatch})))},eo=function(e){return s.createElement(s.Fragment,null,s.createElement("div",{className:[Gi,wi.a.boxView].join(" ")},s.createElement(Hr,{diagram:e.diagramHistory.present,diagramDispatch:e.diagramHistoryDispatch,elements:e.elements})),s.createElement("div",{className:[Gi,wi.a.boxView].join(" ")},s.createElement(oo,null)),s.createElement("div",{className:[Gi,wi.a.boxView].join(" ")},s.createElement(bi,{diagram:e.diagramHistory.present})))},to=function(e){var t=s.useState(!1),n=Object(d.a)(t,2),a=n[0],r=n[1];return s.createElement("div",{className:[qi,c.w.primary].join(" ")},s.createElement("div",{className:[Ji,wi.a.row].join(" ")},s.createElement("div",{className:Gi},s.createElement(zi,null)),s.createElement($i,e),s.createElement("div",{className:[Gi,wi.a.search].join(" ")},s.createElement(Mi,{diagram:e.diagramHistory.present,diagramDispatch:e.diagramHistoryDispatch,elements:e.elements})),s.createElement(eo,e),s.createElement("div",{className:Gi},s.createElement(Ii,{more:a,setMore:r}))),a&&s.createElement(s.Fragment,null,s.createElement(c.b,{color:"weak"}),s.createElement("div",{className:[Zi,wi.a.row,Pi.a.stripe].join(" ")},s.createElement($i,e),s.createElement(eo,e),!1===u&&s.createElement("div",{className:Gi,children:s.createElement(Wi,null)}),s.createElement("div",{className:Gi,children:s.createElement(Pr,null)}),s.createElement("div",{className:Gi,children:s.createElement(hi,null)}),s.createElement(c.i,null),s.createElement("div",{className:Gi,children:s.createElement(Ni,null)}))))},no=Object(te.a)(Array(8).keys()).map((function(e,t){var n=.25*(t+1);return{label:"".concat(100*n,"%"),value:n}})),ao=function(e){return Math.min(Math.max(no[0].value,e),no[no.length-1].value)},ro=function(e){return Object(O.a)(Object(O.a)({},e),{},{zoom:ao(e.zoom+.25)})},io=function(e){return Object(O.a)(Object(O.a)({},e),{},{zoom:ao(e.zoom-.25)})},oo=function(){var e=s.useContext(ue),t=e.setPreferences,n=e.preferences.zoom;return s.createElement(c.d,null,[s.createElement(c.c,{key:"out",icon:on.a.zoomOut,onClick:function(){return t(io)},size:Ki,title:"Zoom out"}),s.createElement(c.s,{key:"select",value:n,setValue:function(e){return t(function(e){return function(t){return Object(O.a)(Object(O.a)({},t),{},{zoom:ao(e)})}}(e))},options:no,size:Ui,title:"Set zoom level"}),s.createElement(c.c,{key:"in",icon:on.a.zoomIn,onClick:function(){return t(ro)},size:Ki,title:"Zoom in"})])},co=function(e){return function(t){var n=[e.diagramDispatch,e.setPreferences],a=n[0],r=n[1];if(!(t.target instanceof HTMLInputElement)&&!(t.target instanceof HTMLTextAreaElement)){var i=t.ctrlKey||t.metaKey;switch(t.key){case"Backspace":case"Delete":a({type:"remove-selected-items"});break;case"=":case"-":if(!i)break;r("-"===t.key?io:ro);break;case"A":case"a":if(!i)break;a({type:"select-all-tables",payload:{selected:!0}});break;case"D":case"d":i&&a({type:"duplicate-selected-table"});break;case"Z":case"z":i&&a({type:t.shiftKey?"redo":"undo"});break;case"Y":case"y":i&&a({type:"redo"});break;default:return}t.preventDefault()}}},lo=function(e){return function(t){var n;if(!(t.target instanceof HTMLInputElement)&&!(t.target instanceof HTMLAreaElement)){t.preventDefault();var a=null===(n=t.clipboardData)||void 0===n?void 0:n.getData("text/plain");a&&(e.diagramDispatch({type:"select-all-tables",payload:{selected:!1}}),function(){var t={diagram:a};e.diagramDispatch({type:"append",payload:t})}())}}},uo=function(e){var t=e.elements,n=e.diagram,a=e.diagramDispatch,r=s.useContext(ue).setPreferences;return function(e){s.useEffect((function(){var t=e.viewport;if(null===t)throw Error("Element is null");return t.addEventListener("keydown",Lr),function(){return t.removeEventListener("keydown",Lr)}}),[e]),s.useEffect((function(){var t=e.viewport;if(null===t)throw Error("Element is null");return t.addEventListener("keydown",Mr),function(){return t.removeEventListener("keydown",Mr)}}),[e])}(t),s.createElement("div",{className:[Er.a.container].join(" "),tabIndex:0,ref:function(e){t.viewport=e},onCopy:Dr(e),onPaste:lo(e),onKeyDown:co(Object(O.a)(Object(O.a)({},e),{},{setPreferences:r}))},s.createElement(Ir,{elements:t,diagram:n,diagramDispatch:a}),s.createElement(gr,{elements:t,diagram:n,diagramDispatch:a}))},so=n(202),mo=n.n(so),fo=function(){return s.createElement("div",{className:[mo.a.container,c.w.secondary].join(" ")},s.createElement("div",null,s.createElement(c.p,null,s.createElement(c.t,null,"No diagram is opened")),s.createElement(c.j,{size:8}),s.createElement(c.p,null,"You can open diagrams or create new ones",s.createElement("br",null),"from the Library pane on the left")))},po=n(121),vo=n.n(po),bo=w("setProgressIndicator"),ho=function(){var e=m.a.useState(!1),t=Object(d.a)(e,2),n=t[0],a=t[1],r=m.a.useState(void 0),i=Object(d.a)(r,2),o=i[0],l=i[1];return m.a.useEffect((function(){bo((function(e,t){a(e),l(t)}))}),[]),!1===n?null:m.a.createElement("div",{className:[vo.a.container,c.w.secondary].join(" ")},m.a.createElement("div",{className:vo.a.body},m.a.createElement(c.r,{size:24,value:!0===n?null:n}),void 0!==o&&m.a.createElement(m.a.Fragment,null,m.a.createElement(c.j,{size:16}),m.a.createElement("div",null,o))))},go=w("importDiagramJSON"),wo=w("importDiagramObject"),Eo=w("importDiagramBase64"),yo=n(122),_o=n.n(yo),xo=function(e){return Object(O.a)(Object(O.a)({},e),{},{footerVisible:!1})},jo=function(){var e=s.useContext(ue).setPreferences,t=s.createElement(c.c,{style:c.c.style.flat,size:Object(O.a)(Object(O.a)({},c.c.size.small),{},{main:_o.a.buttonSize}),isFullWidth:!0,onClick:function(){return e(xo)},icon:on.a.chevronDown,title:"Close the footer"});return s.createElement("div",{className:_o.a.container,children:t})},Oo=function(e){return s.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:e.href,children:e.children,title:e.title})},ko=n(203),Do=n.n(ko),Ao=n(204),zo=n.n(Ao),Io=function(){return s.createElement("div",{className:[Do.a.container,c.E.muted].join(" ")},s.createElement(c.p,null,s.createElement("span",null,"\xa9 2020 "),s.createElement(Oo,{href:"https://tableplus.com"},"Table Plus Inc."),s.createElement("span",null," 1100-1959 Upper Water Street Halifax NS Canada."),s.createElement("span",null," All rights reserved")),s.createElement(c.j,{size:16}),s.createElement(Oo,{href:"https://tableplus.com"},s.createElement("img",{alt:"TablePlus logo",src:zo.a,width:"auto",height:32})))},Co=n(41),To=n.n(Co),No=n(205),So=n.n(No),Mo=function(){return m.a.createElement("div",{className:[So.a.container,c.E.muted].join(" ")},m.a.createElement(c.p,null,m.a.createElement(Oo,{href:"https://github.com/TablePlus/diagram-plugin",children:"Issue tracker"}),m.a.createElement(c.h,null),m.a.createElement(Oo,{href:"mailto:nick@tableplus.com",children:"Email us"})),m.a.createElement(c.p,null,m.a.createElement("span",null,"Apps: "),m.a.createElement(Oo,{href:"https://tableplus.com/sql",children:"SQL",title:"SQL Formatter"}),m.a.createElement(c.h,null),m.a.createElement(Oo,{href:"https://tableplus.com/xml",children:"XML",title:"XML Viewer & Formatter"}),m.a.createElement(c.h,null),m.a.createElement(Oo,{href:"https://tableplus.com/json",children:"JSON",title:"JSON Viewer & Formatter"})))},Lo=n(206),Po=n.n(Lo),Bo=function(){return s.createElement("div",{className:Po.a.container},s.createElement(c.p,null,s.createElement(c.t,null,"Your data are safe here. "),s.createElement("span",null,"We process your diagram right in the browser, "),s.createElement("span",null,"so no data shall leave this device.")))},Fo=function(){return m.a.createElement("div",{className:[To.a.container,c.w.primary].join(" ")},m.a.createElement(jo,null),m.a.createElement("div",{className:To.a.box,children:m.a.createElement(Bo,null)}),m.a.createElement("div",{className:To.a.sub},m.a.createElement("div",{className:To.a.box,children:m.a.createElement(Mo,null)}),m.a.createElement("div",{className:To.a.box,children:m.a.createElement(Io,null)})))},Ho=function(e){return s.createElement(c.c,{onClick:function(){e.setLibrary(vt())},children:"Diagram",icon:on.a.plus})},Ro=n(90),Vo=n.n(Ro),Qo=function(){var e=Object(v.a)(p.a.mark((function e(t){var n,a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.item.name,a=t.all.map((function(e){return e.name})),r=Re(a,n),!t.item.saved){e.next=6;break}return e.next=6,X.duplicate(t.item.name,r);case 6:t.setLibrary(bt(n,r));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Xo=function(){var e=Object(v.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.C)(['Are you sure you want to delete "'.concat(t.item.name,'"?'),"This action is NOT reversible."]);case 2:if(!1!==e.sent){e.next=5;break}return e.abrupt("return");case 5:if(!t.item.saved){e.next=8;break}return e.next=8,X.remove(t.item.name);case 8:t.setLibrary(mt(t.item.name));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Wo=function(){var e=Object(v.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vi(t.item.diagram,t.item.name));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ko=function(){var e=Object(v.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pi(t.item.diagram));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Yo=function(e){var t=[{label:"Save to file\u2026",fn:function(){return Wo(e)}},{label:"Copy to clipboard",fn:function(){return Ko(e)}},"divider",{label:"Duplicate",fn:function(){return Qo(e)}},"divider",{label:"Delete\u2026",fn:function(){return Xo(e)}}];return s.createElement(c.e,{button:{icon:on.a.more,style:c.c.style.flat,title:"More options"},items:t})},Uo=n(91),Go=n.n(Uo),qo=function(){var e=Object(v.a)(p.a.mark((function e(t,n){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=t.item.name)!==n){e.next=3;break}return e.abrupt("return");case 3:if(!1!==t.item.saved){e.next=9;break}return r=Or(t.item.diagram,"edit","json"),e.next=7,X.set(n,r);case 7:e.next=11;break;case 9:return e.next=11,X.rename(a,n);case 11:t.setLibrary(dt(a,n));case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Jo=function(e){if(e.isEdit)return s.createElement(c.l,{style:c.l.style.flat,defaultValue:e.item.name,onKeyUp:function(){var t=Object(v.a)(p.a.mark((function t(n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("Enter"===n.key){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,qo(e,n.currentTarget.value);case 4:e.setIsEdit(!1);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onBlur:function(){var t=Object(v.a)(p.a.mark((function t(n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,qo(e,n.currentTarget.value);case 2:e.setIsEdit(!1);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),autoFocus:!0});var t=[Go.a.button,c.c.style.flat.main,c.c.size.medium.main,e.isCurrent?Go.a.current:"",!1===e.item.saved?Go.a.unsaved:""].join(" ");return s.createElement("button",{className:t,onClick:function(){!function(e){e.isCurrent||e.setLibrary(pt(e.item.name))}(e)},onDoubleClick:function(){e.setIsEdit(!0)},title:"Click to select, Double-click to rename"},e.item.name,!1===e.item.saved&&s.createElement(c.o,null," - unsaved"))},Zo=function(e){var t=s.useState(!1),n=Object(d.a)(t,2),a=n[0],r=n[1];return s.createElement("div",{className:[Vo.a.container,e.isCurrent?c.w.secondary:""].join(" ")},s.createElement("div",{className:Vo.a.primary},s.createElement(Jo,Object.assign({},e,{isEdit:a,setIsEdit:r}))),s.createElement("div",{className:[Vo.a.secondary,c.E.muted].join(" ")},s.createElement(c.c,{onClick:function(){r(!0)},icon:on.a.edit,style:c.c.style.flat,title:"Rename diagram",selected:a}),s.createElement(Yo,e)))},$o=n(123),ec=n.n($o),tc=function(e,t){return e.saved===t.saved?e.name.localeCompare(t.name):(e.saved?1:0)-(t.saved?1:0)},nc=function(e){return s.createElement("div",{className:[ec.a.container,c.w.primary].join(" ")},s.createElement("div",{className:ec.a.header},s.createElement(Ho,e)),s.createElement(c.b,{color:"weak"}),Object(te.a)(e.library.all).sort(tc).map((function(t){return s.createElement(s.Fragment,{key:t.name},s.createElement(Zo,{item:t,all:e.library.all,setLibrary:e.setLibrary,isCurrent:e.library.current===t.name}),s.createElement(c.b,{color:"weak"}))})))},ac=n(33),rc=n.n(ac),ic=document.documentElement,oc=function(e){var t=m.a.useState(!1),n=Object(d.a)(t,2),a=n[0],r=n[1],i=function(t){var n=t.clientX;return n=Math.min(n,e.max),(n=Math.max(n,e.min))-8},o=function(t){e.onChange(i(t))},c=function t(n){ic.classList.remove(rc.a.disable),ic.removeEventListener("mousemove",o),ic.removeEventListener("mouseup",t),e.onStop(i(n)),r(!1)};return m.a.createElement("div",{className:"".concat(rc.a.container," ").concat(a?rc.a.drag:rc.a.noDrag),onMouseDown:function(){ic.classList.add(rc.a.disable),ic.addEventListener("mousemove",o),ic.addEventListener("mouseup",c),r(!0)},onDoubleClick:function(){e.fallback&&e.onStop(e.fallback)},children:m.a.createElement("div",{className:rc.a.line})})},cc=n(207),lc=n.n(cc),uc=function(e){return function(t){var n=e.libraryElement.current;if(null===n)throw Error("Library element is null");n.style.width="".concat(t,"px")}},sc=function(e){var t=s.useContext(ue).setPreferences;return s.createElement("div",{className:lc.a.container},s.createElement(oc,{fallback:320,min:240,max:800,onChange:uc(e),onStop:function(e){return t(function(e){return function(t){return Object(O.a)(Object(O.a)({},t),{},{libraryWidth:e})}}(e))}}))},mc=fe.newDiagram(),dc=function(){var e=m.a.useContext(ue).preferences,t=function(){var e=m.a.useReducer(ct,void 0,(function(){return{past:[],present:ut,future:[]}})),t=Object(d.a)(e,2);return{diagramHistory:t[0],diagramHistoryDispatch:t[1]}}(),n=t.diagramHistory,a=t.diagramHistoryDispatch,r=n.present,i=a,o={diagram:r,diagramDispatch:i},l=m.a.useRef(mc).current,f=m.a.useRef(null),b=function(){var e=s.useRef(null),t=s.useState({current:null,all:[]}),n=Object(d.a)(t,2),a=n[0],r=n[1],i=a.current;return s.useEffect((function(){Object(v.a)(p.a.mark((function t(){var n,a,i,o;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,X.list();case 2:if(n=t.sent,!u){t.next=8;break}a=vt()({current:null,all:n}),r(a),t.next=23;break;case 8:return t.next=10,E.get();case 10:if(t.t1=i=t.sent,t.t0=null!==t.t1,!t.t0){t.next=14;break}t.t0=void 0!==i;case 14:if(!t.t0){t.next=18;break}t.t2=i,t.next=19;break;case 18:t.t2=null;case 19:o=t.t2,n.find((function(e){return e.name===o}))||(o=null),e.current=o,r({current:o,all:n});case 23:case"end":return t.stop()}}),t)})))()}),[r]),s.useEffect((function(){u||e.current!==i&&(E.set(i),e.current=i)}),[i]),s.useEffect((function(){var e=null===i?"":"".concat(i," | ");document.title="".concat(e).concat("Diagram by TablePlus")}),[i]),{library:a,setLibrary:r}}(),h=b.library,g=b.setLibrary;!function(e){var t=e.savedDiagram,n=e.elements,a=e.diagramDispatch;m.a.useEffect((function(){var e=function(e){Object(v.a)(p.a.mark((function r(){var i;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,new Promise((function(e){return window.setTimeout(e,100)}));case 2:return i=L(e),t.current=i,a({type:"replace-as-is",payload:{diagram:i}}),r.next=7,new Promise((function(e){return window.setTimeout(e,100)}));case 7:i=Be(n,i),t.current=i,a({type:"replace-as-is",payload:{diagram:i}});case 10:case"end":return r.stop()}}),r)})))()};go(e),wo(e),Eo(e)}),[a,n,t])}({savedDiagram:function(e,t){var n=e.diagram,a=e.diagramDispatch,r=t.library,i=t.setLibrary,o=s.useRef(null),c=s.useRef(null),l=r.current,u=r.all;return s.useEffect((function(){if(null!==l&&null!==c.current&&c.current!==n){var e=Or(n,"edit","json");X.set(l,e),i(ft(l)),c.current=n}}),[l,n,i]),s.useEffect((function(){null!==l&&null!==o.current&&o.current!==n&&(o.current=n,i(ht(l,n)))}),[n,l,i]),s.useEffect((function(){if(null!==l){var e=u.find((function(e){return e.name===l}));if(void 0===e)throw Error("Item is undefined");var t=e.diagram;o.current=t,c.current=t,a({type:"replace-as-is",payload:{diagram:t}})}}),[l,u,a]),{savedDiagram:c}}(o,b).savedDiagram,elements:l,diagramDispatch:i});var w=e.libraryVisible&&m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:wt.a.library,ref:f,style:{width:e.libraryWidth}},m.a.createElement(nc,{library:h,setLibrary:g})),m.a.createElement(sc,{libraryElement:f})),y=m.a.createElement("div",{className:wt.a.canvas},m.a.createElement(uo,{elements:l,diagram:r,diagramDispatch:i}),null===h.current&&m.a.createElement(fo,null),m.a.createElement(ho,null)),_=m.a.createElement("div",{className:[wt.a.container,c.w.secondary,c.A.custom].join(" ")},m.a.createElement("div",{className:wt.a.header},m.a.createElement(to,{diagramHistory:n,diagramHistoryDispatch:a,elements:l})),m.a.createElement(c.b,{color:"strong"}),m.a.createElement("div",{className:[wt.a.body].join(" ")},w,y),!u&&e.footerVisible&&m.a.createElement(m.a.Fragment,null,m.a.createElement(c.b,{color:"strong"}),m.a.createElement("div",{className:wt.a.footer,children:m.a.createElement(Fo,null)})));return m.a.createElement(st.Provider,{value:r,children:_})},fc=(n(400),21),pc=ue.Provider,vc=function(){var e=function(){var e=s.useState(le),t=Object(d.a)(e,2),n=t[0],a=t[1],r=s.useMemo((function(){return{preferences:n,setPreferences:a}}),[n,a]);return s.useEffect((function(){var e=JSON.stringify(n);window.localStorage.setItem("dg/prefs",e)}),[n]),oe(r),r}(),t=m.a.createElement(dc,null);return t=m.a.createElement(pc,{value:e,children:t}),t=m.a.createElement(ee,{children:t})};me.a.render(m.a.createElement(vc,null),document.getElementById("root"))},41:function(e,t,n){e.exports={container:"footer_container__3Tp73",box:"footer_box__1IYzf",sub:"footer_sub__1Q0H4"}},50:function(e,t,n){e.exports={input:"item_input__ixbFO",included:"item_included__35MhD",text:"item_text__1_TO3"}},51:function(e,t,n){e.exports={container:"indicator_container__1vP5q",dot:"indicator_dot__3DlWS",svg:"indicator_svg__3Dcfl",line:"indicator_line__1k9Wd"}},52:function(e,t,n){e.exports={row:"rows_row__1NQG5",input:"rows_input__1lvUu",add:"rows_add__3CKCp",remove:"rows_remove__2QPiD"}},53:function(e,t,n){e.exports={container:"string_container__pXXoR",view:"string_view__3iJI7",weak:"string_weak__1mnGj",edit:"string_edit__1nPLW",empty:"string_empty__2UXvP"}},54:function(e,t,n){e.exports={container:"title_container__2xckB",main:"title_main__c3cFf",expanded:"title_expanded__3SkVM",view:"title_view__202aj"}},55:function(e,t,n){e.exports={container:"inactive_container__3wcVI",title:"inactive_title__pfmka",body:"inactive_body__3MSbt",group:"inactive_group__3ZCzT"}},56:function(e,t,n){e.exports={container:"mac_container__6Bv62",box:"mac_box__1ekj1",main:"mac_main__39COm",more:"mac_more__9XYzs"}},57:function(e,t,n){e.exports={container:"win_container__1RtCl",main:"win_main__2S08j",more:"win_more__1t6pc"}},81:function(e){e.exports=JSON.parse('{"columns":[{"id":"0","name":"name","type":"string"},{"id":"1","name":"type","type":"string"},{"id":"2","name":"nullable","type":"boolean"}],"items":[],"refs":[],"schema":"main"}')},85:function(e,t,n){e.exports={container:"select_container__2oOvI",indicator:"select_indicator__1bctk"}},87:function(e,t,n){e.exports={container:"columns_container__1Xeli","slide-in":"columns_slide-in__3JJtl",field:"columns_field__3Jvyg",rightField:"columns_rightField__1rrNn"}},88:function(e,t,n){e.exports={container:"side_container__1d3nh",label:"side_label__2ERrb",table:"side_table__3una0"}},89:function(e,t,n){e.exports={container:"inactive_container__29bmK",first:"inactive_first__1nDg5",second:"inactive_second__3fsFn"}},90:function(e,t,n){e.exports={container:"item_container__LwPGS",primary:"item_primary__1xb5m",secondary:"item_secondary__2nZ9L"}},91:function(e,t,n){e.exports={button:"name_button__CwjOi",current:"name_current__3YZiZ",weak:"name_weak__1Fqt7",unsaved:"name_unsaved__1gw5v"}}},[[210,1,2]]]);
//# sourceMappingURL=main.999fb225.chunk.js.map